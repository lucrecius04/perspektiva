<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 48 48%27%3E%3Ccircle cx=%2724%22 cy=%2224%22 r=%2224%22 fill=%22%230c1a2e%22/%3E%3Ccircle cx=%2724%22 cy=%2224%22 r=%2221%22 fill=%22none%22 stroke=%22%2360a5fa%22 stroke-width=%221.5%22/%3E%3Cline x1=%223%22 y1=%2229%22 x2=%2245%22 y2=%2229%22 stroke=%22%2360a5fa%22 stroke-width=%221.2%22/%3E%3Crect x=%228%22 y=%2218%22 width=%224%22 height=%2210%22 rx=%221%22 fill=%22%2360a5fa%22/%3E%3Crect x=%2215%22 y=%2213%22 width=%224%22 height=%2215%22 rx=%221%22 fill=%22%2360a5fa%22/%3E%3Crect x=%2221.5%22 y=%228%22 width=%225%22 height=%2220%22 rx=%221.5%22 fill=%22%23ffffff%22/%3E%3Crect x=%2229%22 y=%2215%22 width=%224%22 height=%2213%22 rx=%221%22 fill=%22%2360a5fa%22/%3E%3Crect x=%2236%22 y=%2220%22 width=%224%22 height=%228%22 rx=%221%22 fill=%22%2360a5fa%22/%3E%3C/svg%3E">
    <title>Svět v perspektivě – Data o globálním pokroku</title>
    <link rel="stylesheet" href="perspektiva-theme.css">
  <!-- Anti-flash: tmavý režim se aplikuje před renderováním -->
  <script>
    (function(){
      var t = localStorage.getItem('svp-theme');
      var dark = t === 'dark' || (!t && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches);
      if (dark) document.documentElement.classList.add('dark');
    })();
  </script>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:wght@400;600;700&family=IBM+Plex+Sans:wght@300;400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { overflow-x: hidden; }
        body { overflow-x: hidden; max-width: 100vw; }
        body {
            font-family: var(--font-sans);
            background: var(--color-bg);
            color: var(--color-text);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            margin: 0;
            -webkit-font-smoothing: antialiased;
        }

        /* Specifické styly pro úvodní stranu */
        #home, #temata, #klicove-statistiky, #o-nas, #data {
            scroll-margin-top: 90px;
        }

       /* HERO SECTION */
.hero {
            background: linear-gradient(135deg, var(--color-hero-start) 0%, var(--color-border-input) 50%, var(--color-border) 100%);
            border-bottom: 1px solid var(--color-border);
        }

        .hero-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 2rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 3rem;
        }

        .hero-text {
            flex: 1;
        }

        .hero-text h1 {
            font-family: var(--font-serif);
            font-size: 2.75rem;
            font-weight: 700;
            line-height: 1.1;
            margin-bottom: 0.75rem;
            color: var(--color-text);
            letter-spacing: -0.02em;
        }

        .hero-text p {
            font-size: 1.15rem;
            color: var(--color-text-muted);
            line-height: 1.6;
            max-width: 600px;
        }

        .hero-right {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .cisla-tydne-label {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            font-weight: 700;
            color: var(--color-primary);
        }

        .cisla-tydne-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
        }

        .cislo-tydne-card {
            background: linear-gradient(135deg, var(--color-surface) 0%, var(--color-hero-start) 100%);
            border: 2px solid var(--color-primary);
            border-radius: 0.75rem;
            padding: 1rem 1rem;
            text-align: center;
            min-width: 130px;
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.15);
        }

        .cislo-number {
            font-family: var(--font-mono);
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--color-primary);
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        .cislo-desc {
            font-size: 0.72rem;
            color: var(--color-text);
            line-height: 1.35;
            font-weight: 500;
        }

        /* QUICK FACTS */
        .quick-facts {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .quick-fact {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-left: 3px solid var(--color-primary);
            border-radius: 0.4rem;
            padding: 0.5rem 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.6rem;
            min-width: 200px;
        }

        .quick-fact-icon {
            font-size: 1rem;
            flex-shrink: 0;
        }

        .quick-fact-text {
            font-size: 0.78rem;
            line-height: 1.3;
            color: var(--color-text);
        }

        .quick-fact-number {
            font-family: var(--font-mono);
            font-weight: 700;
            color: var(--color-primary);
        }

        .stat-week-label-mini {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }

        .stat-week-number-mini {
            font-family: var(--font-mono);
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-primary);
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        .stat-week-desc-mini {
            font-size: 0.75rem;
            color: var(--color-text);
            line-height: 1.3;
            font-weight: 500;
        }

        /* ── BOTTOM TWO-COLUMN LAYOUT (Témata + Státy v datech) ── */
        .bottom-two-col {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2.5rem 2rem 4rem;
            display: grid;
            grid-template-columns: 65fr 35fr;
            gap: 3rem;
            align-items: start;
            border-top: 1px solid var(--color-border);
            width: 100%;
            box-sizing: border-box;
        }
        .bottom-col-right {
            position: sticky;
            top: 100px;
        }
        .about-panel {
            margin-top: 1.25rem;
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 0.6rem;
            padding: 1.25rem 1.5rem;
            box-shadow: 0 1px 4px rgba(14,165,233,0.08);
        }
        .about-panel-title {
            font-size: 0.7rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            color: var(--color-text-muted);
            margin-bottom: 0.6rem;
        }
        .about-panel-text {
            font-size: 0.88rem;
            line-height: 1.65;
            color: var(--color-text-muted);
            margin-bottom: 1rem;
        }
        .archiv-cta {
            display: block;
            background: var(--color-primary);
            color: white;
            text-align: center;
            padding: 0.7rem 1rem;
            border-radius: 8px;
            font-weight: 700;
            font-size: 0.88rem;
            text-decoration: none;
            transition: background 0.2s, transform 0.15s, box-shadow 0.15s;
            box-shadow: 0 2px 8px rgba(14,165,233,0.25);
        }
        .archiv-cta:hover {
            background: var(--color-primary-hover);
            transform: translateY(-1px);
            box-shadow: 0 4px 14px rgba(14,165,233,0.38);
        }

        /* Fix scroll offset for sticky header */
        #home, #temata, #klicove-statistiky, #o-nas, #data {
            scroll-margin-top: 90px;
        }

        .topics-header {
            display: flex;
            align-items: baseline;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .topics-header h2 {
            margin-bottom: 0;
        }

        .topics-hint {
            font-size: 0.8rem;
            color: var(--color-text-muted);
            font-style: italic;
        }

        .show-all-btn {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 0.5rem 1.25rem;
            border-radius: 0.5rem;
            font-size: 0.85rem;
            font-family: var(--font-sans);
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.2s;
            box-shadow: 0 1px 3px rgba(14,165,233,0.3);
        }

        .show-all-btn:hover {
            background: var(--color-primary-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        /* TOPICS SECTION (LEFT) - replaces articles-section */
        .topics-section {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .topics-section h2 {
            display: inline;
            font-family: var(--font-serif);
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0;
        }

        .topic-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 0.5rem;
            align-items: stretch;
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 0.6rem;
            padding: 0.5rem;
            box-shadow: 0 1px 4px rgba(14,165,233,0.08);
        }
        .topic-card.featured {
            border-radius: 50%;
            aspect-ratio: 1;
            background: linear-gradient(135deg, var(--color-surface) 0%, var(--color-bg) 100%);
            border: 1.5px solid rgba(14,165,233,0.35);
            box-shadow: 0 3px 12px rgba(14,165,233,0.15);
            margin-left: 0.5rem;
            width: 70%;
            justify-self: center;
            flex-direction: column;
            gap: 0.1rem;
            padding: 0.2rem;
        }
        .topic-card.featured::before {
            display: none;
        }
        .topic-card.featured:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 18px rgba(14,165,233,0.22);
            border-color: rgba(14,165,233,0.6);
        }


        
        .topic-card.special {
            border-left: 2px solid rgba(14,165,233,0.5);
            margin-left: 0.6rem;
        }

        a.topic-card { text-decoration: none; }
        /* Geo karty (Česko, Svět) — pill tvar, odlišné od obdélníků */
        /* Regulérní témata: 2 sloupce ze 6 = 33 %, 3 za řádek */
        .topic-card:not(.topic-geo) { grid-column: span 2; }

        /* Poslední 2 non-geo (výzvy + mýty): span 3 aby vyplnily řádek */
        .topic-card:not(.topic-geo):nth-last-child(3),
        .topic-card:not(.topic-geo):nth-last-child(4) { grid-column: span 3; }

        /* Geo karty (Česko, Svět): 3 sloupce ze 6 = 50 %, 2 za řádek */
        .topic-card.topic-geo {
            border-radius: 999px;
            padding: 0 1rem;
            font-weight: 700;
            height: 58px;
            grid-column: span 3;
        }
 
       /* Prázdná buňka v gridu pro vizuální mezeru */
        .topic-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 0.4rem;
            padding: 0 0.5rem;
            cursor: pointer;
            transition: all 0.25s;
            position: relative;
            overflow: visible;
            text-align: left;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            height: 48px;
        }
        
        @media (max-width: 900px) {
            .bottom-two-col { grid-template-columns: 1fr; gap: 2rem; }
            .bottom-col-right { position: static; }
        }

        .topic-badge {
            position: absolute;
            top: -6px;
            right: -2px;
            background: var(--category-color, var(--color-primary));
            color: white;
            font-size: 0.65rem;
            font-weight: 700;
            font-family: var(--font-mono);
            padding: 0.15rem 0.4rem;
            border-radius: 999px;
            box-shadow: var(--shadow-md);
            min-width: 20px;
            text-align: center;
        }

        .topic-card .category-icon {
            margin-bottom: 0;
            display: block;
        }

        .topic-card .category-name {
            font-size: 0.72rem;
            font-weight: 600;
            margin: 0;
            line-height: 1.2;
            white-space: nowrap;
            text-align: left;
            color: var(--color-text);
        }

        .topic-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--category-color, var(--color-primary));
            transform: scaleY(0);
            transition: transform 0.3s;
        }

        .topic-card:hover::before {
            transform: scaleY(1);
        }

        .topic-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--category-color, var(--color-primary));
        }

        .topic-card.active-category {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--category-color, var(--color-primary));
            border-width: 2px;
            background: linear-gradient(to bottom, white, var(--color-bg));
        }

        /* Articles container - fixed height to prevent jumping */
        /* Latest articles section — below hero, full width */
        .latest-articles-section {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 2rem 2.5rem;
            border-bottom: 1px solid var(--color-border);
        }
        .latest-articles-section .articles-header h2 {
            font-size: 1.4rem;
        }
        .articles-container {
            margin-top: 0;
        }
        .articles-container.hidden {
            display: none;
        }

        .articles-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-shrink: 0;
        }

        .articles-container h2 {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            font-weight: 700;
        }

        .article-list {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
        }
        @media (max-width: 1024px) { .article-list { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 640px) { .article-list { grid-template-columns: 1fr; } }

        .article-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-left: 4px solid var(--color-primary);
            border-radius: 0.5rem;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            height: 225px;
            overflow: hidden;
            box-sizing: border-box;
        }

        .article-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.12);
        }

        .article-card-header {
            padding: 1rem 1rem 0.4rem; /* Horní i levé odsazení je nyní 1rem */
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            overflow: hidden;
        }

        .article-meta {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            margin-bottom: 0.3rem; /* Zvýšeno z 0.05rem pro lepší rozestup */
        }

        .article-tag {
            font-size: 0.62rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.07em;
            color: white;
            padding: 0.15rem 0.5rem;
            border-radius: 3px;
        }

        .article-date {
            font-family: var(--font-mono);
            font-size: 0.72rem;
            color: var(--color-text-muted);
            margin-left: auto;
        }

        .article-title {
            font-family: var(--font-serif);
            font-size: 1.25rem;
            font-weight: 700;
            line-height: 1.2;
            margin-top: 0;
            margin-bottom: 0.35rem;
            color: var(--color-text);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .article-excerpt {
            font-size: 0.82rem;
            line-height: 1.45;
            color: var(--color-text-muted);
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .article-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
            border-top: 1px solid var(--color-border);
            margin-top: auto;
            height: 42px;
            flex-shrink: 0;
            background: rgba(0,0,0,0.01);
        }

        .article-stat {
            font-size: 0.92rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            color: inherit;
            line-height: 1.2;
            max-height: 3em;
            overflow: hidden;
            flex: 1;
            min-width: 0;
        }

        .article-stat-label {
            font-weight: 500;
            text-transform: none;
            font-size: 0.88rem;
            color: inherit;
        }

        .article-read-more {
            font-size: 0.8rem;
            color: var(--color-primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            flex-shrink: 0;
            margin-left: 0.5rem;
        }

        /* DATA SECTION (RIGHT) */
        .data-section {
            background: linear-gradient(135deg, var(--color-hero-start) 0%, var(--color-border-input) 100%);
            padding: 0.9rem;
            border-radius: 1rem;
            width: 100%;
            box-sizing: border-box;
            overflow: hidden;
        }

        .data-section h2 {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
        }

        .country-selector {
            background: var(--color-surface);
            padding: 1rem 1.25rem;
            border-radius: 0.5rem;
            border: 2px solid var(--color-border);
            box-shadow: var(--shadow-sm);
            margin-bottom: 0.6rem;
            position: relative;
        }

        .country-selector label {
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--color-text-muted);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        #countrySearch {
            font-family: var(--font-sans);
            font-size: 0.95rem;
            padding: 0.625rem 0.875rem;
            border: 2px solid var(--color-border);
            border-radius: 0.5rem;
            width: 100%;
            outline: none;
        }

        #countrySearch:focus { border-color: var(--color-primary); }

        .country-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            max-height: 300px;
            overflow-y: auto;
            background: var(--color-surface);
            border: 2px solid var(--color-primary);
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
        }

        .country-dropdown.active { display: block; }

        .country-option {
            padding: 0.625rem 0.875rem;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 0.9rem;
        }

        .country-option:hover { background: #f0fdfa; }
        .country-option.selected {
            background: var(--color-primary);
            color: white;
        }

        .country-flag { margin-right: 0.5rem; }
        
        .country-divider {
            border-top: 1px solid var(--color-border);
            margin: 0.5rem 0;
        }

        /* Stats grid - 3 columns, all tiles identical */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .stat-box {
            background: var(--color-surface);
            padding: 0.5rem 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid var(--color-border);
            cursor: pointer;
            transition: all 0.3s;
            min-height: 72px;
            height: auto;
            overflow: hidden;
            box-sizing: border-box;
            display: flex;
            flex-direction: column;
            justify-content: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.04);
        }

        .stat-box:hover {
            border-color: rgba(14, 165, 233, 0.3);
            box-shadow: var(--shadow-sm);
        }

        .stat-box.active {
            border-color: var(--color-primary);
            border-width: 2px;
            background: linear-gradient(135deg, var(--color-surface) 0%, var(--color-hero-start) 100%);
            box-shadow: 0 6px 16px rgba(14, 165, 233, 0.3);
            transform: scale(1.02);
        }

        .stat-value-row {
            display: flex;
            align-items: baseline;
            gap: 0.3rem;
        }

        .stat-number {
            font-family: var(--font-mono);
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--color-primary);
        }

        .stat-box.active .stat-number {
            color: var(--color-primary-hover);
        }

        .stat-year {
            font-family: var(--font-mono);
            font-size: 0.7rem;
            color: var(--color-text-muted);
            font-weight: 400;
        }

        .stat-label {
            font-size: 0.7rem;
            color: var(--color-text-muted);
            font-weight: 500;
            line-height: 1.2;
            white-space: normal;
            overflow: hidden;
            margin-top: 0.1rem;
        }

        /* Chart */
        .chart-container {
            background: var(--color-surface);
            padding: 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid var(--color-border);
        }

        /* Legend above chart */
        .chart-legend {
            display: none;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.6rem 1.25rem;
            margin-bottom: 0.6rem;
            padding: 0.45rem 0.7rem;
            background: var(--color-bg);
            border: 1px solid var(--color-border);
            border-radius: 0.4rem;
            font-size: 0.78rem;
            color: var(--color-text);
            overflow: hidden;
        }

        .chart-legend.visible {
            display: flex;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 0.45rem;
            min-width: 0;
            white-space: nowrap;
        }

        .legend-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .legend-line-solid   { display: inline-block; width: 18px; height: 3px; border-radius: 2px; flex-shrink: 0; }
        .legend-line-dashed  { display: inline-block; width: 18px; height: 0; border-top: 2.5px dashed; flex-shrink: 0; }
        .legend-line-dotted  { display: inline-block; width: 18px; height: 0; border-top: 2.5px dotted; flex-shrink: 0; }

        .chart-title {
            font-family: var(--font-serif);
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.6rem;
        }

        #dataChart {
            width: 100%;
            height: 420px;
        }

        .chart-subtitle {
            font-size: 0.78rem;
            color: var(--color-text-muted);
            margin-bottom: 0.4rem;
            line-height: 1.45;
        }

        .chart-source {
            font-size: 0.72rem;
            color: var(--color-text-muted);
            margin-top: 0.5rem;
            font-style: italic;
        }

        /* Chart controls: range buttons + compare */
        .chart-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 0.6rem;
            flex-wrap: wrap;
        }

        .range-btns {
            display: flex;
            gap: 0.3rem;
        }

        .range-btn {
            background: var(--color-surface);
            border: 1.5px solid var(--color-border);
            border-radius: 999px;
            padding: 0.2rem 0.7rem;
            font-size: 0.75rem;
            font-family: var(--font-mono);
            font-weight: 600;
            color: var(--color-text-muted);
            cursor: pointer;
            transition: all 0.2s;
        }

        .range-btn:hover {
            border-color: var(--color-primary);
            color: var(--color-primary);
        }

        .range-btn.active {
            background: var(--color-primary);
            border-color: var(--color-primary);
            color: white;
        }

        .compare-selector {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-left: auto;
        }

        .compare-group {
            display: flex;
            align-items: center;
            gap: 0.15rem;
        }

        .compare-label {
            font-size: 0.72rem;
            color: var(--color-text-muted);
            font-weight: 600;
            white-space: nowrap;
        }

        .compare-select-wrapper {
            position: relative;
            display: inline-flex;
            align-items: center;
        }

        .compare-select-wrapper::after {
            content: '▾';
            position: absolute;
            right: 0.55rem;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.65rem;
            color: var(--color-text-muted);
            pointer-events: none;
        }

        #compareCountrySelect {
            font-family: var(--font-sans);
            font-size: 0.75rem;
            padding: 0.22rem 1.8rem 0.22rem 0.75rem;
            border: 1.5px solid var(--color-border);
            border-radius: 999px;
            background: var(--color-surface);
            color: var(--color-text);
            cursor: pointer;
            outline: none;
            appearance: none;
            -webkit-appearance: none;
            min-width: 0;
            max-width: 180px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        #compareCountrySelect:hover {
            border-color: var(--color-primary);
        }

        #compareCountrySelect:focus,
        #compareCountrySelect2:focus {
            border-color: var(--color-primary);
            box-shadow: 0 0 0 2px rgba(14,165,233,0.15);
        }

        #compareCountrySelect2 {
            font-family: var(--font-sans);
            font-size: 0.75rem;
            padding: 0.22rem 1.8rem 0.22rem 0.75rem;
            border: 1.5px solid var(--color-border);
            border-radius: 999px;
            background: var(--color-surface);
            color: var(--color-text);
            cursor: pointer;
            outline: none;
            appearance: none;
            -webkit-appearance: none;
            min-width: 0;
            max-width: 180px;
            transition: border-color 0.2s, box-shadow 0.2s;
        }
        #compareCountrySelect2:hover { border-color: var(--color-primary); }

        .compare-reset-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 17px;
            height: 17px;
            border: 1.5px solid var(--color-border);
            border-radius: 50%;
            background: var(--color-surface);
            color: var(--color-text-muted);
            font-size: 0.65rem;
            line-height: 1;
            cursor: pointer;
            padding: 0;
            flex-shrink: 0;
            transition: all 0.18s;
            visibility: hidden;
            opacity: 0;
        }
        .compare-reset-btn.active {
            visibility: visible;
            opacity: 1;
        }
        .compare-reset-btn:hover {
            border-color: #ef4444;
            color: #ef4444;
            background: rgba(239,68,68,0.08);
        }
        /* Disclaimer */
        .poverty-disclaimer {
            max-width: 1400px;
            margin: 0 auto 3rem;
            padding: 0 2rem;
        }

        .disclaimer-box {
            background: #fef3c7;
            border-left: 4px solid var(--color-accent);
            padding: 1.25rem 1.5rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: start;
            gap: 1rem;
        }

        .disclaimer-icon { font-size: 1.25rem; flex-shrink: 0; }

        .disclaimer-content h3 {
            font-family: var(--font-serif);
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .disclaimer-content p {
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 0.5rem;
        }

        .disclaimer-content .source {
            font-size: 0.8rem;
            color: var(--color-text-muted);
        }

        .disclaimer-content .source a {
            color: var(--color-primary);
            text-decoration: underline;
        }

        /* TOPICS */
        .categories {
            max-width: 1400px;
            margin: 3rem auto 0;
            padding: 0 2rem;
        }

        .section-header {
            margin-bottom: 2rem;
        }

        .section-title {
            font-family: var(--font-serif);
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.25rem;
        }

        .category-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 0.5rem;
            padding: 1.75rem;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--category-color, var(--color-primary));
            transform: scaleY(0);
            transition: transform 0.3s;
        }

        .category-card:hover::before { transform: scaleY(1); }

        .category-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--category-color, var(--color-primary));
        }

        .category-card.active-category {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--category-color, var(--color-primary));
            border-width: 3px;
            background: linear-gradient(to bottom, white, var(--color-bg));
        }

        .category-icon {
            width: 1.2rem;
            height: 1.2rem;
            margin-bottom: 0;
            display: block;
            flex-shrink: 0;
            color: var(--category-color, var(--color-primary));
        }
        .category-icon svg {
            width: 100%;
            height: 100%;
            stroke: currentColor;
            fill: none;
            stroke-width: 1.75;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .category-name {
            font-family: var(--font-serif);
            font-size: 1.35rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .category-stat {
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--color-text-muted);
        }

        /* BRAND SECTION */
        .brand-section-wrap {
            border-top: 1px solid var(--color-border);
            background: var(--color-bg);
        }
        .brand-section {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.2rem 2rem 0.8rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .brand-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0rem;
        }

        .brand-logo {
            width: 120px;
            height: 120px;
        }

        .brand-title {
            font-family: var(--font-serif);
            font-size: 3rem;
			margin-top: 0.02rem;
            font-weight: 700;
            color: var(--color-text);
            line-height: 1.2;
            margin: 0;
        }

        .brand-subtitle {
            font-size: 1.1rem;
            color: var(--color-text-muted);
            font-weight: 400;
            margin: 0;
        }

        @media (max-width: 1024px) {
            .hero-content {
                flex-direction: column;
            }
        }

        /* ══ DEBUNKER HERO ══ */
        .hero-outer {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: stretch;
            gap: 1.75rem;
        }
        .cislo-panel {
            flex-shrink: 0;
            width: 210px;
            display: flex;
            flex-direction: column;
            padding-top: 2.2rem;
        }
        .cislo-panel-card {
            flex: 1;
            background: linear-gradient(135deg, var(--color-surface) 0%, var(--color-hero-start) 100%);
            border: 2px solid var(--color-primary);
            border-radius: 16px;
            padding: 1.25rem 1rem;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            text-align: center;
            box-shadow: 0 4px 12px rgba(14,165,233,0.15);
            gap: 0.5rem;
        }
        /* Wrapper label+číslo — na desktopu průhledný, zachovává flow */
        .cislo-number-wrap {
            display: contents;
        }
        .cislo-panel-source {
            font-size: 0.68rem;
            color: var(--color-primary-hover);
            font-weight: 600;
            background: rgba(14,165,233,0.1);
            padding: 0.2rem 0.5rem;
            border-radius: 20px;
            margin-top: auto;
        }
        /* ══ DEBUNKER HERO ══ (cont) */
        .hero { padding: 0; }
        .hero-outer {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: stretch;
            gap: 1.75rem;
            padding: 1.5rem 2rem 1.75rem;
        }
        .debunker-inner { flex: 1; min-width: 0; }
        .debunker-label {
            display: flex; align-items: center; gap: 0.5rem;
            font-size: 0.85rem; font-weight: 800; text-transform: uppercase;
            letter-spacing: 0.14em; color: var(--color-primary); margin-bottom: 1.2rem;
        }
        .debunker-label::before {
            content: ''; display: inline-block; width: 8px; height: 8px;
            background: var(--color-primary); border-radius: 50%; animation: dbpulse 2s infinite;
        }
        @keyframes dbpulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.4; transform: scale(1.4); }
        }
        .debunker-cards {
            display: grid; grid-template-columns: 1fr auto 1fr;
            gap: 0; align-items: stretch; min-height: 140px;
        }
        .card-myth {
            background: linear-gradient(135deg, #fff5f5 0%, #fee2e2 100%);
            border: 1.5px solid #fca5a5; border-radius: 20px;
            padding: 1.1rem 1.4rem; position: relative; overflow: hidden;
            transition: opacity 0.35s ease, background 0.35s, border-color 0.35s; margin-right: -14px;
            padding-right: calc(1.4rem + 14px); z-index: 1;
            height: 160px;
            display: flex; flex-direction: column;
            color: #dc2626;
        }
        .card-myth.is-context {
            background: #e0f2fe;
            border-color: #93c5fd;
            color: #0284c7;
        }
        .card-myth .card-icon { color: inherit; }
        .card-myth.is-context .card-label-myth { color: #0284c7; }
        .card-myth.is-context .myth-quote { color: #0369a1; }
        .card-myth.is-context .myth-source { color: #0369a1; }

        /* Dark mode overrides for context variant */
        html.dark .card-myth.is-context {
            background: #1e3a5f;
            border-color: #38bdf8;
        }
        html.dark .card-myth.is-context .myth-quote { color: #e0f2fe; }
        html.dark .card-myth.is-context .myth-source { color: #7dd3fc; }
        html.dark .card-myth.is-context .card-label-myth { color: #7dd3fc; }

        .card-myth::before {
            content: ''; position: absolute; top: -20px; right: -20px;
            width: 100px; height: 100px;
            background: radial-gradient(circle, rgba(239,68,68,0.1) 0%, transparent 70%);
        }
        .card-vs {
            display: flex; align-items: center; justify-content: center;
            width: 60px; flex-shrink: 0; position: relative; z-index: 2;
            transition: opacity 0.35s ease;
        }
        .vs-circle {
            width: 44px; height: 44px; background: var(--color-text-strong); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.7rem; font-weight: 700; color: white; letter-spacing: 0.05em;
            box-shadow: 0 4px 16px rgba(0,0,0,0.22);
        }
        .card-data {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 60%, #d1fae5 100%);
            border: 1.5px solid #6ee7b7; border-radius: 20px;
            padding: 1.1rem 1.4rem; position: relative; overflow: hidden;
            transition: opacity 0.35s ease; margin-left: -14px;
            padding-left: calc(1.4rem + 14px); z-index: 1;
            height: 160px;
            display: flex; flex-direction: column;
        }
        .card-data::before {
            content: ''; position: absolute; top: -20px; left: -20px;
            width: 100px; height: 100px;
            background: radial-gradient(circle, rgba(16,185,129,0.14) 0%, transparent 70%);
        }
        .card-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.2rem; }
        .card-icon { font-size: 1.05rem; line-height: 1; }
        .card-label-myth { font-size: 0.67rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.12em; color: #dc2626; }
        .card-label-data { font-size: 0.67rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.12em; color: var(--color-primary-hover); }
        .myth-quote {
            font-family: var(--font-serif); font-style: italic;
            font-size: 1.25rem; line-height: 1.35; color: #991b1b; margin: 0;
            font-weight: 700;
        }
        .myth-quote-wrap { flex: 1; }
        .myth-source { font-size: 0.77rem; color: #b91c1c; opacity: 0.75; margin-top: auto; }
        .data-number {
            font-family: var(--font-serif); font-size: 2.4rem; font-weight: 700;
            line-height: 1; color: #065f46; margin-bottom: 0.3rem; letter-spacing: -0.02em;
        }
        .data-number.negative { color: #b45309; }
        .data-desc { font-size: 0.82rem; line-height: 1.4; color: #064e3b; margin-bottom: 0.6rem; }
        .data-source {
            display: inline-flex; align-items: center; gap: 0.35rem;
            font-size: 0.71rem; font-weight: 600; color: var(--color-primary-hover);
            background: rgba(14,165,233,0.1); padding: 0.25rem 0.6rem; border-radius: 20px;
            max-width: 100%; white-space: normal; word-break: break-word;
            margin-top: auto; align-self: flex-start;
        }
        .context-note {
            background: var(--color-surface); border-left: 3px solid var(--color-primary);
            padding: 0.55rem 1rem; font-size: 0.8rem; color: var(--color-text-body);
            border-radius: 0 8px 8px 0; margin-top: 0.7rem; font-style: italic;
            transition: opacity 0.35s ease;
        }
        .debunker-footer {
            display: flex; align-items: center;
            justify-content: space-between; margin-top: 1rem; gap: 1rem;
        }
        .analysis-btn {
            display: inline-flex; align-items: center; gap: 0.8rem;
            background: var(--color-primary); color: white; text-decoration: none;
            padding: 0.8rem 1.5rem; border-radius: 12px;
            font-size: 0.875rem; font-weight: 600;
            transition: all 0.35s ease;
            box-shadow: 0 4px 15px rgba(14,165,233,0.3);
            max-width: 100%;
            width: fit-content;
        }
        .analysis-btn:hover { background: var(--color-primary-hover); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(14,165,233,0.4); }
        .btn-meta { display: flex; flex-direction: column; gap: 0.1rem; text-align: left; }
        .btn-action { font-size: 0.7rem; opacity: 0.9; font-weight: 400; letter-spacing: 0.05em; }
        .btn-title-text { font-size: 0.95rem; font-weight: 700; line-height: 1.2; }
        .carousel-nav { display: flex; align-items: center; gap: 0.6rem; }
        .carousel-dots { display: flex; gap: 0.4rem; }
        .dot {
            width: 8px; height: 8px; border-radius: 50%; background: var(--color-border-input);
            cursor: pointer; transition: all 0.3s; border: none; padding: 0;
        }
        .dot.active { background: var(--color-primary); width: 24px; border-radius: 4px; }
        .carousel-btn {
            width: 32px; height: 32px; border-radius: 50%; border: 1.5px solid var(--color-border-input);
            background: var(--color-surface); cursor: pointer; display: flex; align-items: center;
            justify-content: center; font-size: 0.9rem; color: var(--color-text-muted); transition: all 0.2s;
        }
        .carousel-btn:hover { border-color: var(--color-primary); color: var(--color-primary); }
        .pause-btn {
            width: 32px; height: 32px; border-radius: 50%;
            border: 1.5px solid var(--color-border-input); background: var(--color-surface); cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.8rem; color: var(--color-text-muted); transition: all 0.2s;
        }
        .pause-btn:hover, .pause-btn.paused { border-color: var(--color-primary); color: var(--color-primary); background: var(--color-bg); }
        /* Skryj emoji obsah, ukaž SVG ikony */
        .pause-btn .icon-pause, .pause-btn .icon-play { display: none; pointer-events: none; }
        .pause-btn:not(.paused) .icon-pause { display: block; }
        .pause-btn.paused .icon-play { display: block; }
        .progress-wrap { display: flex; align-items: center; gap: 0.5rem; margin-top: 0.7rem; }
        .progress-bar { flex: 1; height: 3px; background: var(--color-border); border-radius: 2px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--color-primary); border-radius: 2px; }

        /* ══════════════════════════════════
           MOBILNÍ OPTIMALIZACE  (max 768px)
           Desktop je beze změn.
           ══════════════════════════════════ */
        @media (max-width: 768px) {
            /* Scroll offset — mobilní header je 56px */
            #home, #temata, #klicove-statistiky, #o-nas, #data {
                scroll-margin-top: 62px;
            }

            /* ── Základní overflow prevence ── */
            .hero, .hero-outer, .debunker-inner,
            .latest-articles-section, .bottom-two-col,
            .data-section, .stats-grid, .topic-grid {
                max-width: 100vw;
                box-sizing: border-box;
                overflow-x: hidden;
            }

            /* ── Nejnovější články: žádný scrollbar ── */
            .latest-articles-section {
                overflow-x: hidden !important;
            }
            .article-list {
                overflow-x: hidden !important;
            }

            /* ── Graf controls: zmenšit tlačítka a zalomit ── */
            .range-btns {
                flex-wrap: wrap;
                gap: 0.25rem;
            }
            .range-btn {
                padding: 0.18rem 0.5rem;
                font-size: 0.68rem;
            }
            .compare-selector {
                margin-left: 0;
                flex-direction: column;
                align-items: flex-start;
                gap: 0.3rem;
                width: 100%;
            }
            .compare-group {
                width: 100%;
                gap: 0.4rem;
            }
            .compare-select-wrapper {
                flex: 1;
                min-width: 0;
            }
            #compareCountrySelect,
            #compareCountrySelect2 {
                width: 100%;
                max-width: 100%;
                font-size: 0.72rem;
                padding: 0.22rem 1.6rem 0.22rem 0.65rem;
                border-radius: 8px;
            }
            .compare-label { font-size: 0.7rem; }

            /* ── Hero: hero-outer stackuje vertikálně ── */
            .hero-outer {
                flex-direction: column;
                padding: 1rem 1rem 1rem;
                gap: 0.6rem;
            }

            /* ── Číslo týdne: velmi kompaktní proužek ── */
            .cislo-panel {
                width: 100%;
                padding-top: 0;
                flex-direction: row;
            }
            .cislo-panel-card {
                width: 100%;
                flex-direction: row;
                align-items: center;
                text-align: left;
                gap: 0.875rem;
                padding: 0.5rem 0.875rem;
                border-radius: 10px;
                border-width: 1px;
                justify-content: flex-start;
            }
            /* Levý blok: label + velké číslo */
            .cislo-number-wrap {
                display: flex;
                flex-direction: column;
                align-items: flex-start;
                flex-shrink: 0;
                gap: 0;
            }
            .cisla-tydne-label {
                font-size: 0.52rem !important;
                letter-spacing: 0.1em !important;
                margin-bottom: 0.1rem !important;
            }
            .cislo-number { font-size: 1.6rem !important; }
            /* Pravý blok: první popis */
            .cislo-panel-card .cislo-desc {
                font-size: 0.78rem !important;
                line-height: 1.3 !important;
            }
            /* Skryj druhý dlouhý popis a zdroj */
            .cislo-desc-long,
            .cislo-panel-source { display: none !important; }

            /* ── Debunker karty: stack vertikálně ── */
            .debunker-cards {
                grid-template-columns: 1fr;
                min-height: auto;
                gap: 0;
                position: relative;
            }
            .card-myth {
                margin-right: 0;
                padding-right: 1.2rem;
                height: auto;
                min-height: 90px;
                border-radius: 14px 14px 0 0;
            }
            .card-data {
                margin-left: 0;
                padding-left: 1.2rem;
                height: auto;
                min-height: 90px;
                border-radius: 0 0 14px 14px;
            }
            /* VS jako úzký separátor — jen malý odznak přes okraj */
            .card-vs {
                width: 100%;
                height: 0;
                position: relative;
                z-index: 5;
                display: flex;
                justify-content: center;
                align-items: center;
            }
            .vs-circle {
                width: 30px;
                height: 30px;
                font-size: 0.55rem;
                position: relative;
                z-index: 5;
                box-shadow: 0 2px 8px rgba(0,0,0,0.3);
            }
            .myth-quote { font-size: 1rem; line-height: 1.3; }
            .data-number { font-size: 1.75rem; }
            .data-desc { font-size: 0.79rem; }

            /* ── Debunker footer: wrap ── */
            .debunker-footer {
                flex-direction: column;
                align-items: stretch;
                gap: 0.75rem;
            }
            .analysis-btn { width: 100%; justify-content: flex-start; }
            .carousel-nav { align-self: center; }

            /* ── Article cards: auto výška, stats nepřekrývat ── */
            .article-card { height: auto; min-height: 0; }
            .article-stats {
                height: auto;
                min-height: 42px;
                padding: 0.4rem 1rem;
                flex-wrap: wrap;
                gap: 0.25rem;
            }
            .article-stat-text { 
                white-space: normal;
                font-size: 0.82rem;
                line-height: 1.25;
            }
            .article-stat { max-height: none; }

            /* ── Nejnovější články: menší padding ── */
            .latest-articles-section { padding: 1.5rem 1rem 2rem; }

            /* ── Topic grid: 3 sloupce místo 6 ── */
            .topic-grid { grid-template-columns: repeat(3, 1fr); }
            .topic-card:not(.topic-geo) { grid-column: span 1 !important; }
            .topic-card.topic-geo { grid-column: span 3 !important; border-radius: 12px; }

            /* ── Spodní layout: 1 sloupec, správný padding ── */
            .bottom-two-col {
                grid-template-columns: 1fr;
                padding: 1.5rem 1rem 3rem;
                width: 100%;
                max-width: 100vw;
                box-sizing: border-box;
                gap: 1.5rem;
                overflow: hidden;
            }
            /* Zabezpeč všechny přímé potomky */
            .bottom-two-col > * {
                min-width: 0;
                max-width: 100%;
                box-sizing: border-box;
            }
            /* data-section a topic-grid: plná šířka bez overflow */
            .data-section {
                width: 100% !important;
                max-width: 100% !important;
                overflow: hidden !important;
            }
            .topic-grid {
                width: 100% !important;
                max-width: 100% !important;
            }

            /* ── Stats grid: 2 sloupce, bez overflow ── */
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                width: 100%;
            }
            .stat-box { min-width: 0; overflow: hidden; }
            .stat-number { font-size: 1.1rem; }
            .stat-label { white-space: normal; font-size: 0.65rem; }

            /* ── Graf: plná šířka ── */
            .chart-container { width: 100%; overflow-x: hidden; }
            #dataChart { height: 280px; }

            /* ── Porovnání: wrap ── */
            .chart-controls { flex-wrap: wrap; gap: 0.5rem; }
            .compare-selector { margin-left: 0; flex-wrap: wrap; }

            /* ── hero-text h1 ── */
            .hero-text h1 { font-size: 2rem; }
            .category-grid { grid-template-columns: 1fr; }
        }

        @media (max-width: 480px) {
            .hero-outer { padding: 0.75rem 0.875rem 0.875rem; }
            .topic-grid { grid-template-columns: repeat(2, 1fr); }
            .topic-card.topic-geo { grid-column: span 2 !important; }
            .stats-grid { grid-template-columns: repeat(2, 1fr); }
            .article-card { height: auto; min-height: 0; }
            .latest-articles-section { padding: 1.25rem 0.875rem 1.75rem; }
            .bottom-two-col { padding: 1.25rem 0.875rem 2.5rem; }
        }
    </style>
</head>
<body>
    <header></header>

    <!-- DEBUNKER HERO -->
    <section class="hero" id="home">
      <div class="hero-outer">
        <div class="debunker-inner">

          <div class="debunker-label">Témata týdne</div>

        <div class="debunker-cards">
          <div class="card-myth" id="mythCard">
            <div class="card-header">
              <span class="card-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/><path d="M18 14h-8"/><path d="M15 18h-5"/><path d="M10 6h8v4h-8V6z"/></svg></span>
              <span class="card-label-myth" id="mythLabel">Objevuje se v médiích</span>
            </div>
            <p class="myth-quote" id="mythText">„Do rozpočtu EU posíláme víc, než dostáváme zpátky."</p>
            <p class="myth-source" id="mythSource">Běžný narativ na sociálních sítích</p>
          </div>

          <div class="card-vs" id="vsCard">
            <div class="vs-circle">VS</div>
          </div>

          <div class="card-data" id="dataCard">
            <div class="card-header">
              <span class="card-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary-hover)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/><line x1="2" y1="20" x2="22" y2="20"/></svg></span>
              <span class="card-label-data">Co říkají data</span>
            </div>
            <div class="data-number" id="dataNumber">+1,06 bil.</div>
            <p class="data-desc" id="dataDesc">Čistý zisk ČR z EU od roku 2004 do dnes — v korunách. Jsme čistý příjemce.</p>
            <span class="data-source" id="dataSource">📁 Ministerstvo financí ČR</span>
          </div>
        </div>

        <p class="context-note" id="contextNote">ČR od vstupu do EU v roce 2004 čerpala z fondů EU výrazně více, než kolik odváděla do společného rozpočtu. Podrobná čísla jsou dostupná ve Zprávě o výsledcích hospodaření ČR v EU.</p>

        <div class="debunker-footer">
          <a href="kontext-clanek-eu-myth.html" class="analysis-btn" id="analysisBtn">
            <div class="btn-meta">
              <span class="btn-action">Číst celou analýzu →</span>
              <span class="btn-title-text" id="btnTitle">Mýtus o EU: Platíme víc, než dostáváme?</span>
            </div>
          </a>
          <div class="carousel-nav">
          <button class="pause-btn" id="pauseBtn" onclick="togglePause()" title="Pozastavit">
            <svg class="icon-pause" width="12" height="12" viewBox="0 0 12 12" fill="currentColor"><rect x="1.5" y="1" width="3.5" height="10" rx="1"/><rect x="7" y="1" width="3.5" height="10" rx="1"/></svg>
            <svg class="icon-play" width="12" height="12" viewBox="0 0 12 12" fill="currentColor"><path d="M2 1.5l9 4.5-9 4.5V1.5z"/></svg>
          </button>
            <button class="carousel-btn" onclick="prevSlide()" title="Předchozí">‹</button>
            <div class="carousel-dots">
              <button class="dot active" onclick="goToSlide(0)"></button>
              <button class="dot" onclick="goToSlide(1)"></button>
              <button class="dot" onclick="goToSlide(2)"></button>
            </div>
            <button class="carousel-btn" onclick="nextSlide()" title="Další">›</button>
          </div>
        </div>

        <div class="progress-wrap">
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width:0%"></div>
          </div>
        </div>

        </div><!-- /debunker-inner -->

        <!-- ČÍSLO TÝDNE — vpravo, přes celou výšku -->
        <div class="cislo-panel">
          <div class="cislo-panel-card">
            <div class="cislo-number-wrap">
              <div class="cisla-tydne-label" style="font-size:0.62rem; letter-spacing:0.12em; font-weight:700; text-transform:uppercase; color:var(--color-primary); margin-bottom:0.5rem;">Číslo týdne</div>
              <div class="cislo-number" id="heroLifeExp" style="font-size:2.6rem; color:var(--color-primary);">73.3</div>
            </div>
            <div class="cislo-desc" style="font-size:0.82rem; color:var(--color-text-strong); font-weight:500; line-height:1.35; margin-top:0.35rem;">let — průměrná délka života ve světě</div>
            <div class="cislo-desc cislo-desc-long" style="font-size:0.75rem; color:var(--color-text-muted); margin-top:0.5rem; line-height:1.4;">Hodnota vzrostla z 67 let v roce 2000 o více než 6 let. Historicky nejlepší výsledek.</div>
            <div class="cislo-panel-source">Zdroj: WHO / World Bank 2023</div>
          </div>
        </div>

      </div><!-- /hero-outer -->
    </section>

    <!-- NEJNOVĚJŠÍ ČLÁNKY -->
    <section class="latest-articles-section">
        <div class="articles-container">
            <div class="articles-header">
                <h2>Nejnovější články</h2>
                <a href="archiv.html" class="show-all-btn">Archiv →</a>
            </div>
            <div class="article-list" id="latestArticlesList">
                <!-- Načítá se z data/manifest.json + articles/*.json -->
            </div>
        </div>
    </section>

    <!-- STÁTY V DATECH + TÉMATA: dvousloupcový layout -->
    <div class="bottom-two-col" id="temata">

        <!-- LEVÝ SLOUPEC (3fr): Státy v datech -->
        <div class="bottom-col-left">
            <section class="data-section" id="klicove-statistiky">
                <h2 id="statsTitle">Státy v datech – Svět</h2>

                <div class="country-selector">
                    <label for="countrySearch">Vyberte region:</label>
                    <input
                        type="text"
                        id="countrySearch"
                        placeholder="Svět (vyhledejte zemi...)"
                        autocomplete="off"
                    />
                    <div class="country-dropdown" id="countryDropdown"></div>
                </div>

                <div class="stats-grid">
                    <div class="stat-box active" onclick="showChart('life')" data-metric="life">
                        <div class="stat-value-row">
                            <span class="stat-number" id="lifeExpectancy">73.5</span>
                            <span class="stat-year" id="lifeExpYear"></span>
                        </div>
                        <span class="stat-label">Délka života (roky)</span>
                    </div>
                    <div class="stat-box" onclick="showChart('infant')" data-metric="infant">
                        <div class="stat-value-row">
                            <span class="stat-number" id="infantMortality">26</span>
                            <span class="stat-year" id="infantMortYear"></span>
                        </div>
                        <span class="stat-label">Kojenecká úm. (na 1000)</span>
                    </div>
                    <div class="stat-box" onclick="showChart('fertility')" data-metric="fertility">
                        <div class="stat-value-row">
                            <span class="stat-number" id="stat-fertility">…</span>
                            <span class="stat-year" id="stat-fertility-year"></span>
                        </div>
                        <span class="stat-label">Porodnost (děti/ženu)</span>
                    </div>
                    <div class="stat-box" onclick="showChart('gdp')" data-metric="gdp">
                        <div class="stat-value-row">
                            <span class="stat-number" id="stat-gdp">…</span>
                            <span class="stat-year" id="stat-gdp-year"></span>
                        </div>
                        <span class="stat-label">HDP/obyvatele</span>
                    </div>
                    <div class="stat-box" onclick="showChart('inflation')" data-metric="inflation">
                        <div class="stat-value-row">
                            <span class="stat-number" id="stat-inflation">…</span>
                            <span class="stat-year" id="stat-inflation-year"></span>
                        </div>
                        <span class="stat-label">Inflace</span>
                    </div>
                    <div class="stat-box" onclick="showChart('unemployment')" data-metric="unemployment">
                        <div class="stat-value-row">
                            <span class="stat-number" id="stat-unemployment">…</span>
                            <span class="stat-year" id="stat-unemployment-year"></span>
                        </div>
                        <span class="stat-label">Nezaměstnanost</span>
                    </div>
<div class="stat-box" onclick="showChart('population')" data-metric="population">
                        <div class="stat-value-row">
                            <span class="stat-number" id="stat-population">…</span>
                            <span class="stat-year" id="stat-population-year"></span>
                        </div>
                        <span class="stat-label">Populace</span>
                    </div>
                    <div class="stat-box" onclick="showChart('density')" data-metric="density">
                        <div class="stat-value-row">
                            <span class="stat-number" id="stat-density">…</span>
                            <span class="stat-year" id="stat-density-year"></span>
                        </div>
                        <span class="stat-label">Hustota (os./km²)</span>
                    </div>
                    <div class="stat-box" onclick="showChart('hdi')" data-metric="hdi">
                        <div class="stat-value-row">
                            <span class="stat-number" id="stat-hdi">…</span>
                            <span class="stat-year" id="stat-hdi-year"></span>
                        </div>
                        <span class="stat-label">Index lidského rozvoje</span>
                    </div>
                    <div class="stat-box" onclick="showChart('democracy_eiu')" data-metric="democracy_eiu">
                        <div class="stat-value-row">
                            <span class="stat-number" id="stat-democracy_eiu">…</span>
                            <span class="stat-year" id="stat-democracy_eiu-year"></span>
                        </div>
                        <span class="stat-label">Demokracie (EIU)</span>
                    </div>
                    <div class="stat-box" onclick="showChart('gini')" data-metric="gini">
                        <div class="stat-value-row">
                            <span class="stat-number" id="stat-gini">…</span>
                            <span class="stat-year" id="stat-gini-year"></span>
                        </div>
                        <span class="stat-label">Gini (nerovnost)</span>
                    </div>
                    <div class="stat-box" onclick="showChart('urbanization')" data-metric="urbanization">
                        <div class="stat-value-row">
                            <span class="stat-number" id="stat-urbanization">…</span>
                            <span class="stat-year" id="stat-urbanization-year"></span>
                        </div>
                        <span class="stat-label">Urbanizace</span>
                    </div>
                </div>

                <div class="chart-container">
                    <div class="chart-controls">
                        <div class="range-btns">
                            <button class="range-btn active" data-range="null" onclick="setRange(null)">Vše</button>
                            <button class="range-btn" data-range="1980" onclick="setRange(1980)">1980→</button>
                            <button class="range-btn" data-range="1990" onclick="setRange(1990)">1990→</button>
                            <button class="range-btn" data-range="2000" onclick="setRange(2000)">2000→</button>
                            <button class="range-btn" data-range="2010" onclick="setRange(2010)">2010→</button>
                        </div>
                        <div class="compare-selector">
                            <span class="compare-label">Porovnat:</span>
                            <div class="compare-group">
                                <div class="compare-select-wrapper">
                                    <select id="compareCountrySelect" onchange="setCompareCountry(this.value)">
                                        <option value="">— žádná</option>
                                    </select>
                                </div>
                                <button class="compare-reset-btn" id="compareReset1" onclick="resetCompare(1)">×</button>
                            </div>
                            <div class="compare-group">
                                <div class="compare-select-wrapper">
                                    <select id="compareCountrySelect2" onchange="setCompareCountry2(this.value)">
                                        <option value="">— žádná</option>
                                    </select>
                                </div>
                                <button class="compare-reset-btn" id="compareReset2" onclick="resetCompare(2)">×</button>
                            </div>
                        </div>
                    </div>
                    <div id="chartLegend" class="chart-legend">
                        <div class="legend-item">
                            <span class="legend-line-solid" id="legendPrimaryLine"></span>
                            <span id="legendPrimaryName"></span>
                        </div>
                        <div class="legend-item">
                            <span class="legend-line-dashed" id="legendCompareLine"></span>
                            <span id="legendCompareName"></span>
                        </div>
                        <div class="legend-item" id="legendThirdItem" style="display:none">
                            <span class="legend-line-dotted" id="legendThirdLine"></span>
                            <span id="legendThirdName"></span>
                        </div>
                    </div>
                    <h3 class="chart-title" id="chartTitle">Očekávaná délka života (1960–2023)</h3>
                    <p class="chart-subtitle" id="chartSubtitle"></p>
                    <svg id="dataChart" viewBox="0 0 900 420" style="width:100%;display:block;"></svg>
                    <p class="chart-source" id="chartSource">Zdroj: World Bank – World Development Indicators (data.worldbank.org)</p>
                </div>
            </section>
        </div>

        <!-- PRAVÝ SLOUPEC (2fr, sticky): Témata -->
        <div class="bottom-col-right">
            <section class="topics-section">
                <div class="topics-header">
                    <h2>Témata <span class="topics-hint">→ rozcestník do archivu</span></h2>
                </div>
                <div class="topic-grid" id="topicGrid">
                    <!-- Načítá se z data/categories.json -->
                </div>
            </section>

            <div class="about-panel">
                <div class="about-panel-title">O projektu</div>
                <p class="about-panel-text">Svět v perspektivě je nezávislý datový web. Každý článek staví na primárních zdrojích — statistikách, vědeckých studiích a vládních datech. Bez zkratek, bez senzace.</p>
                <a href="archiv.html" class="archiv-cta" id="archiveCta">Archiv článků →</a>
            </div>

        </div>

    </div>

    <script>
    /* ── DEBUNKER ── */
    var DB_SLIDES = [];
    var DB_DURATION = 10000;
    var dbCurrent = 0, dbPaused = false, dbStartTime = null, dbElapsed = 0, dbRafId = null;

    function dbRender(idx, animate) {
      var s = DB_SLIDES[idx];
      if (!s) return;
      var m = document.getElementById('mythCard');
      var d = document.getElementById('dataCard');
      var v = document.getElementById('vsCard');
      var c = document.getElementById('contextNote');
      var btn = document.getElementById('analysisBtn');
      if (!m || !d || !c || !btn || !v) return;
      
      if (animate) { 
          m.style.opacity='0'; d.style.opacity='0'; 
          c.style.opacity='0'; btn.style.opacity='0';
      }
      
      setTimeout(function() {
        m.classList.toggle('is-context', s.isMyth === false);
        document.getElementById('mythText').textContent = s.myth;
        document.getElementById('mythSource').textContent = s.mythSource;
        var n = document.getElementById('dataNumber');
        n.textContent = s.number;
        n.className = 'data-number' + (s.numberClass ? ' '+s.numberClass : '');
        document.getElementById('dataDesc').textContent = s.desc;
        document.getElementById('dataSource').textContent = s.source;
        c.textContent = s.context;
        
        if (s.link && s.link !== '#') {
            btn.style.visibility = 'visible';
            btn.style.pointerEvents = 'auto';
            btn.href = s.link;
            document.getElementById('btnTitle').textContent = s.btnTitle || 'Číst analýzu';
        } else {
            btn.style.visibility = 'hidden';
            btn.style.pointerEvents = 'none';
        }
        
        document.querySelectorAll('.dot').forEach(function(dot, i) {
          dot.classList.toggle('active', i === idx);
        });
        
        if (animate || idx === 0) { 
            m.style.opacity='1'; d.style.opacity='1'; 
            c.style.opacity='1'; btn.style.opacity='1';
        }
      }, animate ? 350 : 0);
    }

    function dbInitDots() {
        var container = document.querySelector('.carousel-dots');
        if (!container) return;
        container.innerHTML = DB_SLIDES.map(function(_, i) {
            return '<button class="dot' + (i===0?' active':'') + '" onclick="goToSlide(' + i + ')"></button>';
        }).join('');
    }

    function dbUpdate() {
      if (dbPaused) return;
      var total = dbElapsed + (Date.now() - dbStartTime);
      var pct = Math.min((total / DB_DURATION) * 100, 100);
      var pf = document.getElementById('progressFill');
      if (pf) pf.style.width = pct + '%';
      if (total >= DB_DURATION) {
        dbCurrent = (dbCurrent + 1) % DB_SLIDES.length;
        dbRender(dbCurrent, true); dbReset();
      } else { dbRafId = requestAnimationFrame(dbUpdate); }
    }
    function dbReset() {
      cancelAnimationFrame(dbRafId);
      dbElapsed = 0; dbStartTime = Date.now();
      var pf = document.getElementById('progressFill');
      if (pf) pf.style.width = '0%';
      if (!dbPaused) {
          // Wait for transition to finish before starting progress
          setTimeout(function() {
              if (!dbPaused) dbRafId = requestAnimationFrame(dbUpdate);
          }, 400);
      }
    }
    function togglePause() {
      var btn = document.getElementById('pauseBtn');
      if (dbPaused) {
        dbPaused = false; dbStartTime = Date.now();
        btn.classList.remove('paused'); btn.title = 'Pozastavit';
        dbRafId = requestAnimationFrame(dbUpdate);
      } else {
        dbPaused = true; dbElapsed += Date.now() - dbStartTime;
        cancelAnimationFrame(dbRafId);
        btn.classList.add('paused'); btn.title = 'Spustit';
      }
    }
    function goToSlide(idx) { dbCurrent = idx; dbRender(dbCurrent, true); dbReset(); }
    function nextSlide() { goToSlide((dbCurrent + 1) % DB_SLIDES.length); }
    function prevSlide() { goToSlide((dbCurrent - 1 + DB_SLIDES.length) % DB_SLIDES.length); }

    /* ── RENDER ── */
    function statColor(s) {
      return s==='good'?'#059669':s==='bad'?'#dc2626':s==='warning'?'#d97706':'#0ea5e9';
    }
    
    function renderLatestArticles(articles, catData) {
      var list = document.getElementById('latestArticlesList');
      if (!list) return;
      if (!articles || articles.length === 0) {
        list.innerHTML = '<p class="topics-hint">Zatím žádné články k zobrazení.</p>';
        return;
      }

      var topicsMap = {};
      if (catData && catData.topics) {
        catData.topics.forEach(function(t) { topicsMap[t.slug] = t; });
      }

      list.innerHTML = articles.map(function(a) {
        var s0 = a.key_stats && a.key_stats[0];
        var color = statColor(s0 ? s0.color : 'neutral');
        var topicList = a.topics || [];
        var isMyth = topicList.indexOf('mýty') !== -1;
        
        var icon = '📈';
        var statVal = '';
        var statLbl = '';
        
        if (isMyth) {
            if (a.slug === 'cr-a-eu-rozpocet' || (s0 && s0.color === 'bad')) {
                icon = '❌'; statVal = 'NEPRAVDA'; color = '#dc2626';
            } else if (s0 && s0.color === 'warning') {
                icon = '⚠️'; statVal = 'ZAVÁDĚJÍCÍ'; color = '#d97706';
            } else {
                icon = '✅'; statVal = 'PRAVDA'; color = '#059669';
            }
        } else {
            if (s0 && s0.color === 'good') icon = '✅';
            else if (s0 && s0.color === 'bad') icon = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" style="margin-top:2px"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>';
            else if (s0 && s0.color === 'warning') icon = '⚠️';
            else icon = '📈';
            
            statVal = s0 ? s0.value : '';
            statLbl = (s0 && s0.label) ? s0.label : '';
        }
        
        var primaryTopicSlug = topicList[0] || 'česko';
        var primaryColor = (topicsMap[primaryTopicSlug] || {color: '#0ea5e9'}).color;

        var tags = topicList.slice(0,3).map(function(tSlug) {
          var tInfo = topicsMap[tSlug] || { label: tSlug, color: '#64748b' };
          const TAG_LABELS = {
            'mýty': 'Mýty vs fakta',
            'ekonomika': 'Ekonomika',
            'zdraví': 'Zdraví',
            'inovace': 'Inovace',
            'energie': 'Energie',
            'bezpečnost': 'Bezpečnost',
            'demokracie': 'Demokracie',
            'výzvy': 'Výzvy',
            'česko': 'Česko',
            'svět': 'Svět',
          };
          var label = (TAG_LABELS[tSlug] || tSlug.toUpperCase());
          return '<span class="article-tag" style="background:'+tInfo.color+'">'+label+'</span>';
        }).join(' ');

        var displayTitle = a.title_short || a.title || 'Bez názvu';

        return '<a href="clanek.html?slug='+a.slug+'" class="article-card" style="border-left-color:'+primaryColor+'" data-topic="'+topicList.join(' ')+'">'
          +'<div class="article-card-header">'
          +'<div class="article-meta">'+tags+'<span class="article-date">'+(a.dateStr || '')+'</span></div>'
          +'<h3 class="article-title">'+displayTitle+'</h3>'
          +'<p class="article-excerpt">'+(a.perex||'')+'</p>'
          +'</div>'
          +'<div class="article-stats">'
          +'<div class="article-stat" style="color:'+color+'">'
          +'<span style="font-size:1.1rem; line-height:1; flex-shrink:0">'+icon+'</span>'
          +'<span class="article-stat-text">'+statVal+' <span class="article-stat-label">'+statLbl+'</span></span>'
          +'</div>'
          +'<span class="article-read-more" style="color:#0ea5e9; font-weight:700; font-size:0.8rem; margin-left:0.5rem">Číst více →</span>'
          +'</div></a>';
      }).join('');
    }
    function renderTopics(topics, articles) {
      var grid = document.getElementById('topicGrid');
      if (!grid) return;
      if (!topics || topics.length === 0) {
        grid.innerHTML = '<p class="topics-hint">Témata se nepodařilo načíst.</p>';
        return;
      }
      grid.innerHTML = topics.map(function(t) {
        var count = (articles || []).filter(function(a){ return (a.topics||[]).indexOf(t.slug)!==-1; }).length;
        var cls = t.geo ? 'topic-card featured topic-geo' : 'topic-card';
        return '<a href="archiv.html?topic='+encodeURIComponent(t.slug)+'" class="'+cls
          +'" style="--category-color:'+t.color+'" data-topic="'+t.slug+'">'
          +'<span class="category-icon"><svg viewBox="0 0 24 24">'+(t.icon||'')+'</svg></span>'
          +'<h3 class="category-name">'+t.label+'</h3>'
          +'<span class="topic-badge">'+count+'</span>'
          +'</a>';
      }).join('');
    }

    /* ── INIT: přímý IIFE ── */
    (function init() {
      var fetchJson = function(path, fallback) {
        return fetch(path)
          .then(function(r) { return r.ok ? r.json() : fallback; })
          .catch(function(err) { 
            console.warn('SVP varování: Selhalo načtení ' + path, err); 
            return fallback; 
          });
      };

      Promise.all([
        fetchJson('data/debunker.json', []),
        fetchJson('data/manifest.json', []),
        fetchJson('data/categories.json', { topics: [] })
      ]).then(function(data) {
        var debData = data[0];
        var slugs   = data[1];
        var catData = data[2];

        /* Debunker */
        if (debData && debData.length > 0) {
            DB_SLIDES = debData;
            dbInitDots();
            dbRender(0, false);
            dbStartTime = Date.now();
            dbRafId = requestAnimationFrame(dbUpdate);
        }

        /* Články */
        if (!slugs || slugs.length === 0) {
            console.warn('SVP: Žádné články k načtení v manifestu.');
            renderTopics(catData.topics || [], []);
            return;
        }

        return Promise.all(slugs.map(function(slug) {
          return fetch('articles/' + slug + '.json')
            .then(function(r) { return r.ok ? r.json() : null; })
            .catch(function() { return null; });
        })).then(function(results) {
          var articles = (results || [])
            .filter(Boolean)
            .filter(function(a) { return a.status === 'published'; })
            .sort(function(a, b) { 
                return (b.date || '').localeCompare(a.date || ''); 
            });
          
          renderLatestArticles(articles.slice(0, 6), catData);
          renderTopics(catData.topics || [], articles);
          var n = articles.length;
          var w = n === 1 ? 'článek' : (n >= 2 && n <= 4) ? 'články' : 'článků';
          var cta = document.getElementById('archiveCta');
          if (cta) cta.textContent = 'Archiv — ' + n + ' ' + w + ' →';
        });

      }).catch(function(err) {
        console.error('SVP kritická chyba:', err);
      });
    })();
    </script>

    <footer></footer>
    <script src="perspektiva-data.js"></script>
    <script src="perspektiva-stats.js"></script>
    <script src="components.js"></script>
</body>
</html>
