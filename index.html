<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Svƒõt v perspektivƒõ ‚Äì Data o glob√°ln√≠m pokroku</title>
    <link rel="stylesheet" href="perspektiva-theme.css">
  <!-- Anti-flash: tmav√Ω re≈æim se aplikuje p≈ôed renderov√°n√≠m -->
  <script>
    (function(){
      var t = localStorage.getItem('svp-theme');
      var dark = t === 'dark' || (!t && window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches);
      if (dark) document.documentElement.classList.add('dark');
    })();
  </script>
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Serif:wght@400;600;700&family=IBM+Plex+Sans:wght@300;400;500;600&family=IBM+Plex+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: var(--font-sans);
            background: var(--color-bg);
            color: var(--color-text);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            margin: 0;
            -webkit-font-smoothing: antialiased;
        }

        /* Specifick√© styly pro √∫vodn√≠ stranu */
        #home, #temata, #klicove-statistiky, #o-nas, #data {
            scroll-margin-top: 90px;
        }

       /* HERO SECTION */
.hero {
            background: linear-gradient(135deg, var(--color-hero-start) 0%, var(--color-border-input) 50%, var(--color-border) 100%);
            border-bottom: 1px solid var(--color-border);
        }

        .hero-content {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 2rem 1.5rem;
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            gap: 3rem;
        }

        .hero-text {
            flex: 1;
        }

        .hero-text h1 {
            font-family: var(--font-serif);
            font-size: 2.75rem;
            font-weight: 700;
            line-height: 1.1;
            margin-bottom: 0.75rem;
            color: var(--color-text);
            letter-spacing: -0.02em;
        }

        .hero-text p {
            font-size: 1.15rem;
            color: var(--color-text-muted);
            line-height: 1.6;
            max-width: 600px;
        }

        .hero-right {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            flex-shrink: 0;
        }

        .cisla-tydne-label {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.12em;
            font-weight: 700;
            color: var(--color-primary);
        }

        .cisla-tydne-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.75rem;
        }

        .cislo-tydne-card {
            background: linear-gradient(135deg, var(--color-surface) 0%, var(--color-hero-start) 100%);
            border: 2px solid var(--color-primary);
            border-radius: 0.75rem;
            padding: 1rem 1rem;
            text-align: center;
            min-width: 130px;
            box-shadow: 0 4px 12px rgba(14, 165, 233, 0.15);
        }

        .cislo-number {
            font-family: var(--font-mono);
            font-size: 1.75rem;
            font-weight: 700;
            color: var(--color-primary);
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        .cislo-desc {
            font-size: 0.72rem;
            color: var(--color-text);
            line-height: 1.35;
            font-weight: 500;
        }

        /* QUICK FACTS */
        .quick-facts {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .quick-fact {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-left: 3px solid var(--color-primary);
            border-radius: 0.4rem;
            padding: 0.5rem 0.75rem;
            display: flex;
            align-items: center;
            gap: 0.6rem;
            min-width: 200px;
        }

        .quick-fact-icon {
            font-size: 1rem;
            flex-shrink: 0;
        }

        .quick-fact-text {
            font-size: 0.78rem;
            line-height: 1.3;
            color: var(--color-text);
        }

        .quick-fact-number {
            font-family: var(--font-mono);
            font-weight: 700;
            color: var(--color-primary);
        }

        .stat-week-label-mini {
            font-size: 0.65rem;
            text-transform: uppercase;
            letter-spacing: 0.1em;
            font-weight: 700;
            color: var(--color-primary);
            margin-bottom: 0.5rem;
        }

        .stat-week-number-mini {
            font-family: var(--font-mono);
            font-size: 2rem;
            font-weight: 700;
            color: var(--color-primary);
            line-height: 1;
            margin-bottom: 0.5rem;
        }

        .stat-week-desc-mini {
            font-size: 0.75rem;
            color: var(--color-text);
            line-height: 1.3;
            font-weight: 500;
        }

        /* MAIN CONTENT - Articles LEFT, Data RIGHT */
        /* main-content removed ‚Äî now separate full-width sections */
        .topics-fullwidth {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 2rem 1rem;
            border-bottom: 1px solid var(--color-border);
        }
        .data-fullwidth {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 2rem 0; /* Vynulov√°n spodn√≠ padding */
        }

        /* Fix scroll offset for sticky header */
        #home, #temata, #klicove-statistiky, #o-nas, #data {
            scroll-margin-top: 90px;
        }

        .topics-header {
            display: flex;
            align-items: baseline;
            gap: 0.75rem;
            margin-bottom: 0.75rem;
        }

        .topics-header h2 {
            margin-bottom: 0;
        }

        .topics-hint {
            font-size: 0.8rem;
            color: var(--color-text-muted);
            font-style: italic;
        }

        .show-all-btn {
            background: var(--color-primary);
            color: white;
            border: none;
            padding: 0.5rem 1.25rem;
            border-radius: 0.5rem;
            font-size: 0.85rem;
            font-family: var(--font-sans);
            font-weight: 600;
            cursor: pointer;
            text-decoration: none;
            display: inline-block;
            transition: all 0.2s;
            box-shadow: 0 1px 3px rgba(14,165,233,0.3);
        }

        .show-all-btn:hover {
            background: var(--color-primary-hover);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        /* TOPICS SECTION (LEFT) - replaces articles-section */
        .topics-section {
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }

        .topics-section h2 {
            display: inline;
            font-family: var(--font-serif);
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0;
        }

        .topic-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr) 2rem 1fr 1fr;
            gap: 0.25rem;
            align-items: stretch;
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 0.6rem;
            padding: 0.5rem;
            box-shadow: 0 1px 4px rgba(14,165,233,0.08);
        }

        /* ƒåesko skoƒç√≠ a≈æ za mezeru do 10. sloupce */
        .topic-grid a:nth-child(9) { grid-column: 10; }
        .topic-grid a:nth-child(10) { grid-column: 11; }
        .topic-card.featured {
            border-radius: 50%;
            aspect-ratio: 1;
            background: linear-gradient(135deg, var(--color-surface) 0%, var(--color-bg) 100%);
            border: 1.5px solid rgba(14,165,233,0.35);
            box-shadow: 0 3px 12px rgba(14,165,233,0.15);
            margin-left: 0.5rem;
            width: 70%;
            justify-self: center;
            flex-direction: column;
            gap: 0.1rem;
            padding: 0.2rem;
        }
        .topic-card.featured::before {
            display: none;
        }
        .topic-card.featured:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 18px rgba(14,165,233,0.22);
            border-color: rgba(14,165,233,0.6);
        }


        
        .topic-card.special {
            border-left: 2px solid rgba(14,165,233,0.5);
            margin-left: 0.6rem;
        }

        a.topic-card { text-decoration: none; }
        /* Geo karty (ƒåesko, Svƒõt) ‚Äî pill tvar, odli≈°n√© od obd√©ln√≠k≈Ø */
        .topic-card.topic-geo {
            border-radius: 999px;
            padding: 0 1rem;
            font-weight: 700;
        }
 
       /* Pr√°zdn√° bu≈àka v gridu pro vizu√°ln√≠ mezeru */
        .topic-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 0.4rem;
            padding: 0 0.5rem;
            cursor: pointer;
            transition: all 0.25s;
            position: relative;
            overflow: visible;
            text-align: left;
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
            height: 48px;
        }
        
        @media (max-width: 1000px) { .topic-grid { grid-template-columns: repeat(8, 1fr) 1rem repeat(2, 1fr); } }

        .topic-badge {
            position: absolute;
            top: -6px;
            right: -2px;
            background: var(--category-color, var(--color-primary));
            color: white;
            font-size: 0.65rem;
            font-weight: 700;
            font-family: var(--font-mono);
            padding: 0.15rem 0.4rem;
            border-radius: 999px;
            box-shadow: var(--shadow-md);
            min-width: 20px;
            text-align: center;
        }

        .topic-card .category-icon {
            margin-bottom: 0;
            display: block;
        }

        .topic-card .category-name {
            font-size: 0.72rem;
            font-weight: 600;
            margin: 0;
            line-height: 1.2;
            white-space: nowrap;
            text-align: left;
            color: var(--color-text);
        }

        .topic-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--category-color, var(--color-primary));
            transform: scaleY(0);
            transition: transform 0.3s;
        }

        .topic-card:hover::before {
            transform: scaleY(1);
        }

        .topic-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
            border-color: var(--category-color, var(--color-primary));
        }

        .topic-card.active-category {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
            border-color: var(--category-color, var(--color-primary));
            border-width: 2px;
            background: linear-gradient(to bottom, white, var(--color-bg));
        }

        /* Articles container - fixed height to prevent jumping */
        /* Latest articles section ‚Äî below hero, full width */
        .latest-articles-section {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem 2rem 2.5rem;
            border-bottom: 1px solid var(--color-border);
        }
        .latest-articles-section .articles-header h2 {
            font-size: 1.4rem;
        }
        .articles-container {
            margin-top: 0;
        }
        .articles-container.hidden {
            display: none;
        }

        .articles-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
            flex-shrink: 0;
        }

        .articles-container h2 {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            font-weight: 700;
        }

        .article-list {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 0.75rem;
        }
        @media (max-width: 1024px) { .article-list { grid-template-columns: repeat(2, 1fr); } }
        @media (max-width: 640px) { .article-list { grid-template-columns: 1fr; } }

        .article-list::-webkit-scrollbar {
            width: 5px;
        }

        .article-list::-webkit-scrollbar-track {
            background: var(--color-border);
            border-radius: 99px;
        }

        .article-list::-webkit-scrollbar-thumb {
            background: var(--color-primary);
            border-radius: 99px;
        }

        .article-list::-webkit-scrollbar-thumb:hover {
            background: var(--color-primary-hover);
        }

        .article-list::-webkit-scrollbar {
            width: 5px;
        }

        .article-list::-webkit-scrollbar-track {
            background: var(--color-border);
            border-radius: 99px;
        }

        .article-list::-webkit-scrollbar-thumb {
            background: var(--color-primary);
            border-radius: 99px;
        }

        .article-list::-webkit-scrollbar-thumb:hover {
            background: var(--color-primary-hover);
        }

        .article-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-left: 4px solid var(--color-primary);
            border-radius: 0.5rem;
            transition: transform 0.2s, box-shadow 0.2s;
            cursor: pointer;
            text-decoration: none;
            color: inherit;
            display: flex;
            flex-direction: column;
            height: 225px;
            overflow: hidden;
            box-sizing: border-box;
        }

        .article-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 16px rgba(0,0,0,0.12);
        }

        .article-card-header {
            padding: 1rem 1rem 0.4rem; /* Horn√≠ i lev√© odsazen√≠ je nyn√≠ 1rem */
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            overflow: hidden;
        }

        .article-meta {
            display: flex;
            align-items: center;
            gap: 0.4rem;
            margin-bottom: 0.3rem; /* Zv√Ω≈°eno z 0.05rem pro lep≈°√≠ rozestup */
        }

        .article-tag {
            font-size: 0.62rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.07em;
            color: white;
            padding: 0.15rem 0.5rem;
            border-radius: 3px;
        }

        .article-date {
            font-family: var(--font-mono);
            font-size: 0.72rem;
            color: var(--color-text-muted);
            margin-left: auto;
        }

        .article-title {
            font-family: var(--font-serif);
            font-size: 1.25rem;
            font-weight: 700;
            line-height: 1.2;
            margin-top: 0;
            margin-bottom: 0.35rem;
            color: var(--color-text);
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .article-excerpt {
            font-size: 0.82rem;
            line-height: 1.45;
            color: var(--color-text-muted);
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
            margin-bottom: 0.5rem;
        }

        .article-stats {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 1rem;
            border-top: 1px solid var(--color-border);
            margin-top: auto;
            height: 42px;
            flex-shrink: 0;
            background: rgba(0,0,0,0.01);
        }

        .article-stat {
            font-size: 0.92rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.4rem;
            color: inherit;
            line-height: 1.2;
            max-height: 3em;
            overflow: hidden;
            flex: 1;
            min-width: 0;
        }

        .article-stat-label {
            font-weight: 500;
            text-transform: none;
            font-size: 0.88rem;
            color: inherit;
        }

        .article-read-more {
            font-size: 0.8rem;
            color: var(--color-primary);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.25rem;
            flex-shrink: 0;
            margin-left: 0.5rem;
        }

        /* DATA SECTION (RIGHT) */
        .data-section {
            background: linear-gradient(135deg, var(--color-hero-start) 0%, var(--color-border-input) 100%);
            padding: 0.9rem;
            border-radius: 1rem;
        }

        .data-section h2 {
            font-family: var(--font-serif);
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 0.75rem;
        }

        .country-selector {
            background: var(--color-surface);
            padding: 1rem 1.25rem;
            border-radius: 0.5rem;
            border: 2px solid var(--color-border);
            box-shadow: var(--shadow-sm);
            margin-bottom: 0.6rem;
            position: relative;
        }

        .country-selector label {
            display: block;
            font-size: 0.75rem;
            font-weight: 600;
            color: var(--color-text-muted);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        #countrySearch {
            font-family: var(--font-sans);
            font-size: 0.95rem;
            padding: 0.625rem 0.875rem;
            border: 2px solid var(--color-border);
            border-radius: 0.5rem;
            width: 100%;
            outline: none;
        }

        #countrySearch:focus { border-color: var(--color-primary); }

        .country-dropdown {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            max-height: 300px;
            overflow-y: auto;
            background: var(--color-surface);
            border: 2px solid var(--color-primary);
            border-radius: 0.5rem;
            margin-top: 0.5rem;
            box-shadow: var(--shadow-lg);
            z-index: 1000;
        }

        .country-dropdown.active { display: block; }

        .country-option {
            padding: 0.625rem 0.875rem;
            cursor: pointer;
            transition: background 0.2s;
            font-size: 0.9rem;
        }

        .country-option:hover { background: #f0fdfa; }
        .country-option.selected {
            background: var(--color-primary);
            color: white;
        }

        .country-flag { margin-right: 0.5rem; }
        
        .country-divider {
            border-top: 1px solid var(--color-border);
            margin: 0.5rem 0;
        }

        /* Stats grid - 2x2 compact */
        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 0.5rem;
            margin-bottom: 0.75rem;
        }

        .stat-box {
            background: var(--color-surface);
            padding: 0.6rem 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid transparent;
            cursor: pointer;
            transition: all 0.3s;
        }

        .stat-box:hover {
            border-color: rgba(14, 165, 233, 0.3);
            box-shadow: var(--shadow-sm);
        }

        .stat-box.active {
            border-color: var(--color-primary);
            border-width: 2px;
            background: linear-gradient(135deg, var(--color-surface) 0%, var(--color-hero-start) 100%);
            box-shadow: 0 6px 16px rgba(14, 165, 233, 0.3);
            transform: scale(1.02);
        }

        .stat-number {
            font-family: var(--font-mono);
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--color-primary);
            display: block;
            margin-bottom: 0.1rem;
        }

        .stat-box.active .stat-number {
            color: var(--color-primary-hover);
            font-size: 1.4rem;
        }

        .stat-label {
            font-size: 0.72rem;
            color: var(--color-text-muted);
            font-weight: 500;
            line-height: 1.2;
        }

        .stat-year {
            font-family: var(--font-mono);
            font-size: 0.75rem;
            color: var(--color-primary);
            margin-top: 0.25rem;
            font-weight: 600;
        }

        /* Chart */
        .chart-container {
            background: var(--color-surface);
            padding: 0.75rem;
            border-radius: 0.5rem;
            border: 1px solid var(--color-border);
        }

        .chart-title {
            font-family: var(--font-serif);
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        #dataChart {
            width: 100%;
            height: 340px;
        }

        .chart-source {
            font-size: 0.72rem;
            color: var(--color-text-muted);
            margin-top: 0.5rem;
            font-style: italic;
        }
        /* Disclaimer */
        .poverty-disclaimer {
            max-width: 1400px;
            margin: 0 auto 3rem;
            padding: 0 2rem;
        }

        .disclaimer-box {
            background: #fef3c7;
            border-left: 4px solid var(--color-accent);
            padding: 1.25rem 1.5rem;
            border-radius: 0.5rem;
            display: flex;
            align-items: start;
            gap: 1rem;
        }

        .disclaimer-icon { font-size: 1.25rem; flex-shrink: 0; }

        .disclaimer-content h3 {
            font-family: var(--font-serif);
            font-size: 1.1rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .disclaimer-content p {
            font-size: 0.9rem;
            line-height: 1.5;
            margin-bottom: 0.5rem;
        }

        .disclaimer-content .source {
            font-size: 0.8rem;
            color: var(--color-text-muted);
        }

        .disclaimer-content .source a {
            color: var(--color-primary);
            text-decoration: underline;
        }

        /* TOPICS */
        .categories {
            max-width: 1400px;
            margin: 3rem auto 0;
            padding: 0 2rem;
        }

        .section-header {
            margin-bottom: 2rem;
        }

        .section-title {
            font-family: var(--font-serif);
            font-size: 1.75rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .category-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.25rem;
        }

        .category-card {
            background: var(--color-surface);
            border: 1px solid var(--color-border);
            border-radius: 0.5rem;
            padding: 1.75rem;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .category-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--category-color, var(--color-primary));
            transform: scaleY(0);
            transition: transform 0.3s;
        }

        .category-card:hover::before { transform: scaleY(1); }

        .category-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--category-color, var(--color-primary));
        }

        .category-card.active-category {
            transform: translateY(-4px);
            box-shadow: var(--shadow-lg);
            border-color: var(--category-color, var(--color-primary));
            border-width: 3px;
            background: linear-gradient(to bottom, white, var(--color-bg));
        }

        .category-icon {
            width: 1.2rem;
            height: 1.2rem;
            margin-bottom: 0;
            display: block;
            flex-shrink: 0;
            color: var(--category-color, var(--color-primary));
        }
        .category-icon svg {
            width: 100%;
            height: 100%;
            stroke: currentColor;
            fill: none;
            stroke-width: 1.75;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .category-name {
            font-family: var(--font-serif);
            font-size: 1.35rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .category-stat {
            font-family: var(--font-mono);
            font-size: 0.8rem;
            color: var(--color-text-muted);
        }

        /* BRAND SECTION */
        .brand-section-wrap {
            border-top: 1px solid var(--color-border);
            background: var(--color-bg);
        }
        .brand-section {
            max-width: 1400px;
            margin: 0 auto;
            padding: 1.2rem 2rem 0.8rem;
            text-align: center;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0.5rem;
        }

        .brand-content {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0rem;
        }

        .brand-logo {
            width: 120px;
            height: 120px;
        }

        .brand-title {
            font-family: var(--font-serif);
            font-size: 3rem;
			margin-top: 0.02rem;
            font-weight: 700;
            color: var(--color-text);
            line-height: 1.2;
            margin: 0;
        }

        .brand-subtitle {
            font-size: 1.1rem;
            color: var(--color-text-muted);
            font-weight: 400;
            margin: 0;
        }

        @media (max-width: 1024px) {
            .hero-content {
                flex-direction: column;
            }
        }

        @media (max-width: 768px) {
            .hero-text h1 {
                font-size: 2rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .category-grid {
                grid-template-columns: 1fr;
            }

        }
        /* ‚ïê‚ïê DEBUNKER HERO ‚ïê‚ïê */
        .hero-outer {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: stretch;
            gap: 1.75rem;
        }
        .cislo-panel {
            flex-shrink: 0;
            width: 210px;
            display: flex;
            flex-direction: column;
            padding-top: 2.2rem;
        }
        .cislo-panel-card {
            flex: 1;
            background: linear-gradient(135deg, var(--color-surface) 0%, var(--color-hero-start) 100%);
            border: 2px solid var(--color-primary);
            border-radius: 16px;
            padding: 1.25rem 1rem;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            text-align: center;
            box-shadow: 0 4px 12px rgba(14,165,233,0.15);
            gap: 0.5rem;
        }
        .cislo-panel-source {
            font-size: 0.68rem;
            color: var(--color-primary-hover);
            font-weight: 600;
            background: rgba(14,165,233,0.1);
            padding: 0.2rem 0.5rem;
            border-radius: 20px;
            margin-top: auto;
        }
        /* ‚ïê‚ïê DEBUNKER HERO ‚ïê‚ïê (cont) */
        .hero { padding: 0; }
        .hero-outer {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: stretch;
            gap: 1.75rem;
            padding: 1.5rem 2rem 1.75rem;
        }
        .debunker-inner { flex: 1; min-width: 0; }
        .debunker-label {
            display: flex; align-items: center; gap: 0.5rem;
            font-size: 0.85rem; font-weight: 800; text-transform: uppercase;
            letter-spacing: 0.14em; color: var(--color-primary); margin-bottom: 1.2rem;
        }
        .debunker-label::before {
            content: ''; display: inline-block; width: 8px; height: 8px;
            background: var(--color-primary); border-radius: 50%; animation: dbpulse 2s infinite;
        }
        @keyframes dbpulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.4; transform: scale(1.4); }
        }
        .debunker-cards {
            display: grid; grid-template-columns: 1fr auto 1fr;
            gap: 0; align-items: stretch; min-height: 140px;
        }
        .card-myth {
            background: linear-gradient(135deg, #fff5f5 0%, #fee2e2 100%);
            border: 1.5px solid #fca5a5; border-radius: 20px;
            padding: 1.1rem 1.4rem; position: relative; overflow: hidden;
            transition: opacity 0.35s ease, background 0.35s, border-color 0.35s; margin-right: -14px;
            padding-right: calc(1.4rem + 14px); z-index: 1;
            height: 160px;
            display: flex; flex-direction: column;
            color: #dc2626;
        }
        .card-myth.is-context {
            background: #e0f2fe;
            border-color: #93c5fd;
            color: #0284c7;
        }
        .card-myth .card-icon { color: inherit; }
        .card-myth.is-context .card-label-myth { color: #0284c7; }
        .card-myth.is-context .myth-quote { color: #0369a1; }
        .card-myth.is-context .myth-source { color: #0369a1; }

        /* Dark mode overrides for context variant */
        html.dark .card-myth.is-context {
            background: #1e3a5f;
            border-color: #38bdf8;
        }
        html.dark .card-myth.is-context .myth-quote { color: #e0f2fe; }
        html.dark .card-myth.is-context .myth-source { color: #7dd3fc; }
        html.dark .card-myth.is-context .card-label-myth { color: #7dd3fc; }

        .card-myth::before {
            content: ''; position: absolute; top: -20px; right: -20px;
            width: 100px; height: 100px;
            background: radial-gradient(circle, rgba(239,68,68,0.1) 0%, transparent 70%);
        }
        .card-vs {
            display: flex; align-items: center; justify-content: center;
            width: 60px; flex-shrink: 0; position: relative; z-index: 2;
            transition: opacity 0.35s ease;
        }
        .vs-circle {
            width: 44px; height: 44px; background: var(--color-text-strong); border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.7rem; font-weight: 700; color: white; letter-spacing: 0.05em;
            box-shadow: 0 4px 16px rgba(0,0,0,0.22);
        }
        .card-data {
            background: linear-gradient(135deg, #f0fdf4 0%, #dcfce7 60%, #d1fae5 100%);
            border: 1.5px solid #6ee7b7; border-radius: 20px;
            padding: 1.1rem 1.4rem; position: relative; overflow: hidden;
            transition: opacity 0.35s ease; margin-left: -14px;
            padding-left: calc(1.4rem + 14px); z-index: 1;
            height: 160px;
            display: flex; flex-direction: column;
        }
        .card-data::before {
            content: ''; position: absolute; top: -20px; left: -20px;
            width: 100px; height: 100px;
            background: radial-gradient(circle, rgba(16,185,129,0.14) 0%, transparent 70%);
        }
        .card-header { display: flex; align-items: center; gap: 0.5rem; margin-bottom: 0.2rem; }
        .card-icon { font-size: 1.05rem; line-height: 1; }
        .card-label-myth { font-size: 0.67rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.12em; color: #dc2626; }
        .card-label-data { font-size: 0.67rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.12em; color: var(--color-primary-hover); }
        .myth-quote {
            font-family: var(--font-serif); font-style: italic;
            font-size: 1.25rem; line-height: 1.35; color: #991b1b; margin: 0;
            font-weight: 700;
        }
        .myth-quote-wrap { flex: 1; }
        .myth-source { font-size: 0.77rem; color: #b91c1c; opacity: 0.75; margin-top: auto; }
        .data-number {
            font-family: var(--font-serif); font-size: 2.4rem; font-weight: 700;
            line-height: 1; color: #065f46; margin-bottom: 0.3rem; letter-spacing: -0.02em;
        }
        .data-number.negative { color: #b45309; }
        .data-desc { font-size: 0.82rem; line-height: 1.4; color: #064e3b; margin-bottom: 0.6rem; }
        .data-source {
            display: inline-flex; align-items: center; gap: 0.35rem;
            font-size: 0.71rem; font-weight: 600; color: var(--color-primary-hover);
            background: rgba(14,165,233,0.1); padding: 0.25rem 0.6rem; border-radius: 20px;
            max-width: 100%; white-space: normal; word-break: break-word;
            margin-top: auto; align-self: flex-start;
        }
        .context-note {
            background: var(--color-surface); border-left: 3px solid var(--color-primary);
            padding: 0.55rem 1rem; font-size: 0.8rem; color: var(--color-text-body);
            border-radius: 0 8px 8px 0; margin-top: 0.7rem; font-style: italic;
            transition: opacity 0.35s ease;
        }
        .debunker-footer {
            display: flex; align-items: center;
            justify-content: space-between; margin-top: 1rem; gap: 1rem;
        }
        .analysis-btn {
            display: inline-flex; align-items: center; gap: 0.8rem;
            background: var(--color-primary); color: white; text-decoration: none;
            padding: 0.8rem 1.5rem; border-radius: 12px;
            font-size: 0.875rem; font-weight: 600;
            transition: all 0.35s ease;
            box-shadow: 0 4px 15px rgba(14,165,233,0.3);
            max-width: 100%;
            width: fit-content;
        }
        .analysis-btn:hover { background: var(--color-primary-hover); transform: translateY(-2px); box-shadow: 0 6px 20px rgba(14,165,233,0.4); }
        .btn-meta { display: flex; flex-direction: column; gap: 0.1rem; text-align: left; }
        .btn-action { font-size: 0.7rem; opacity: 0.9; font-weight: 400; letter-spacing: 0.05em; }
        .btn-title-text { font-size: 0.95rem; font-weight: 700; line-height: 1.2; }
        .carousel-nav { display: flex; align-items: center; gap: 0.6rem; }
        .carousel-dots { display: flex; gap: 0.4rem; }
        .dot {
            width: 8px; height: 8px; border-radius: 50%; background: var(--color-border-input);
            cursor: pointer; transition: all 0.3s; border: none; padding: 0;
        }
        .dot.active { background: var(--color-primary); width: 24px; border-radius: 4px; }
        .carousel-btn {
            width: 32px; height: 32px; border-radius: 50%; border: 1.5px solid var(--color-border-input);
            background: var(--color-surface); cursor: pointer; display: flex; align-items: center;
            justify-content: center; font-size: 0.9rem; color: var(--color-text-muted); transition: all 0.2s;
        }
        .carousel-btn:hover { border-color: var(--color-primary); color: var(--color-primary); }
        .pause-btn {
            width: 32px; height: 32px; border-radius: 50%;
            border: 1.5px solid var(--color-border-input); background: var(--color-surface); cursor: pointer;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.8rem; color: var(--color-text-muted); transition: all 0.2s;
        }
        .pause-btn:hover, .pause-btn.paused { border-color: var(--color-primary); color: var(--color-primary); background: var(--color-bg); }
        .progress-wrap { display: flex; align-items: center; gap: 0.5rem; margin-top: 0.7rem; }
        .progress-bar { flex: 1; height: 3px; background: var(--color-border); border-radius: 2px; overflow: hidden; }
        .progress-fill { height: 100%; background: var(--color-primary); border-radius: 2px; }

    </style>
</head>
<body>
    <header></header>

    <!-- DEBUNKER HERO -->
    <section class="hero" id="home">
      <div class="hero-outer">
        <div class="debunker-inner">

          <div class="debunker-label">T√©mata t√Ωdne</div>

        <div class="debunker-cards">
          <div class="card-myth" id="mythCard">
            <div class="card-header">
              <span class="card-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 22h16a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2H8a2 2 0 0 0-2 2v16a2 2 0 0 1-2 2zm0 0a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2h2"/><path d="M18 14h-8"/><path d="M15 18h-5"/><path d="M10 6h8v4h-8V6z"/></svg></span>
              <span class="card-label-myth" id="mythLabel">Objevuje se v m√©di√≠ch</span>
            </div>
            <p class="myth-quote" id="mythText">‚ÄûDo rozpoƒçtu EU pos√≠l√°me v√≠c, ne≈æ dost√°v√°me zp√°tky."</p>
            <p class="myth-source" id="mythSource">Bƒõ≈æn√Ω narativ na soci√°ln√≠ch s√≠t√≠ch</p>
          </div>

          <div class="card-vs" id="vsCard">
            <div class="vs-circle">VS</div>
          </div>

          <div class="card-data" id="dataCard">
            <div class="card-header">
              <span class="card-icon"><svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--color-primary-hover)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="20" x2="18" y2="10"/><line x1="12" y1="20" x2="12" y2="4"/><line x1="6" y1="20" x2="6" y2="14"/><line x1="2" y1="20" x2="22" y2="20"/></svg></span>
              <span class="card-label-data">Co ≈ô√≠kaj√≠ data</span>
            </div>
            <div class="data-number" id="dataNumber">+1,06 bil.</div>
            <p class="data-desc" id="dataDesc">ƒåist√Ω zisk ƒåR z EU od roku 2004 do dnes ‚Äî v korun√°ch. Jsme ƒçist√Ω p≈ô√≠jemce.</p>
            <span class="data-source" id="dataSource">üìÅ Ministerstvo financ√≠ ƒåR</span>
          </div>
        </div>

        <p class="context-note" id="contextNote">ƒåR od vstupu do EU v roce 2004 ƒçerpala z fond≈Ø EU v√Ωraznƒõ v√≠ce, ne≈æ kolik odv√°dƒõla do spoleƒçn√©ho rozpoƒçtu. Podrobn√° ƒç√≠sla jsou dostupn√° ve Zpr√°vƒõ o v√Ωsledc√≠ch hospoda≈ôen√≠ ƒåR v EU.</p>

        <div class="debunker-footer">
          <a href="kontext-clanek-eu-myth.html" class="analysis-btn" id="analysisBtn">
            <div class="btn-meta">
              <span class="btn-action">ƒå√≠st celou anal√Ωzu ‚Üí</span>
              <span class="btn-title-text" id="btnTitle">M√Ωtus o EU: Plat√≠me v√≠c, ne≈æ dost√°v√°me?</span>
            </div>
          </a>
          <div class="carousel-nav">
            <button class="pause-btn" id="pauseBtn" onclick="togglePause()" title="Pozastavit">‚è∏</button>
            <button class="carousel-btn" onclick="prevSlide()" title="P≈ôedchoz√≠">‚Äπ</button>
            <div class="carousel-dots">
              <button class="dot active" onclick="goToSlide(0)"></button>
              <button class="dot" onclick="goToSlide(1)"></button>
              <button class="dot" onclick="goToSlide(2)"></button>
            </div>
            <button class="carousel-btn" onclick="nextSlide()" title="Dal≈°√≠">‚Ä∫</button>
          </div>
        </div>

        <div class="progress-wrap">
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill" style="width:0%"></div>
          </div>
        </div>

        </div><!-- /debunker-inner -->

        <!-- ƒå√çSLO T√ùDNE ‚Äî vpravo, p≈ôes celou v√Ω≈°ku -->
        <div class="cislo-panel">
          <div class="cislo-panel-card">
            <div class="cisla-tydne-label" style="font-size:0.62rem; letter-spacing:0.12em; font-weight:700; text-transform:uppercase; color:var(--color-primary); margin-bottom:0.5rem;">ƒå√≠slo t√Ωdne</div>
            <div class="cislo-number" id="heroLifeExp" style="font-size:2.6rem; color:var(--color-primary);">73.3</div>
            <div class="cislo-desc" style="font-size:0.82rem; color:var(--color-text-strong); font-weight:500; line-height:1.35; margin-top:0.35rem;">let ‚Äî pr≈Ømƒõrn√° d√©lka ≈æivota ve svƒõtƒõ</div>
            <div class="cislo-desc" style="font-size:0.75rem; color:var(--color-text-muted); margin-top:0.5rem; line-height:1.4;">Hodnota vzrostla z 67 let v roce 2000 o v√≠ce ne≈æ 6 let. Historicky nejlep≈°√≠ v√Ωsledek.</div>
            <div class="cislo-panel-source">Zdroj: WHO / World Bank 2023</div>
          </div>
        </div>

      </div><!-- /hero-outer -->
    </section>

    <!-- NEJNOVƒöJ≈†√ç ƒåL√ÅNKY -->
    <section class="latest-articles-section">
        <div class="articles-container">
            <div class="articles-header">
                <h2>Nejnovƒõj≈°√≠ ƒçl√°nky</h2>
                <a href="archiv.html" class="show-all-btn">Archiv ‚Üí</a>
            </div>
            <div class="article-list" id="latestArticlesList">
                <!-- Naƒç√≠t√° se z data/manifest.json + articles/*.json -->
            </div>
        </div>
    </section>

    <!-- T√âMATA: full-width rozcestn√≠k -->
    <div class="topics-fullwidth" id="temata">
        <section class="topics-section">
            <div class="topics-header">
                <h2>T√©mata <span class="topics-hint">‚Üí rozcestn√≠k do archivu</span></h2>
            </div>
            <div class="topic-grid" id="topicGrid">
                <!-- Naƒç√≠t√° se z data/categories.json -->
            </div>
        </section>
    </div>

    <!-- STATISTIKY: full-width -->
    <div class="data-fullwidth">
<section class="data-section" id="klicove-statistiky">
            <h2 id="statsTitle">St√°ty v datech ‚Äì Svƒõt</h2>

            <div class="country-selector">
                <label for="countrySearch">Vyberte region:</label>
                <input 
                    type="text" 
                    id="countrySearch" 
                    placeholder="Svƒõt (vyhledejte zemi...)"
                    autocomplete="off"
                />
                <div class="country-dropdown" id="countryDropdown"></div>
            </div>

            <div class="stats-grid">
                <div class="stat-box active" onclick="showChart('life')" data-metric="life">
                    <span class="stat-number" id="lifeExpectancy">73.5</span>
                    <span class="stat-label">Oƒçek√°van√° d√©lka ≈æivota (roky)</span>
                    <span class="stat-year" id="lifeExpYear">Rok: 2023</span>
                </div>
                <div class="stat-box" onclick="showChart('literacy')" data-metric="literacy">
                    <span class="stat-number" id="literacy">88%</span>
                    <span class="stat-label">Gramotnost dospƒõl√Ωch</span>
                    <span class="stat-year" id="literacyYear">Rok: 2023</span>
                </div>
                <div class="stat-box" onclick="showChart('electricity')" data-metric="electricity">
                    <span class="stat-number" id="electricity">92%</span>
                    <span class="stat-label">P≈ô√≠stup k elekt≈ôinƒõ</span>
                    <span class="stat-year" id="electricityYear">Rok: 2023</span>
                </div>
                <div class="stat-box" onclick="showChart('infant')" data-metric="infant">
                    <span class="stat-number" id="infantMortality">26</span>
                    <span class="stat-label">Kojeneck√° √∫mrtnost (na 1000)</span>
                    <span class="stat-year" id="infantMortYear">Rok: 2023</span>
                </div>
            </div>

            <div class="chart-container">
                <h3 class="chart-title" id="chartTitle">Oƒçek√°van√° d√©lka ≈æivota (1960-2023)</h3>
                <svg id="dataChart" viewBox="0 0 700 340"></svg>
                <p class="chart-source" id="chartSource">Zdroj: World Bank ‚Äì World Development Indicators (data.worldbank.org)</p>
            </div>
        </section>
    </div>

    <section class="brand-section-wrap">
        <div class="brand-section">
            <div class="brand-content">
                <svg xmlns="http://www.w3.org/2000/svg" width="120" height="120" viewBox="0 0 48 48" class="brand-logo" aria-label="Logo">
                    <circle cx="24" cy="24" r="21" fill="#0c1a2e"/><line x1="24" y1="29" x2="7"  y2="46" stroke="#60a5fa" stroke-width="1"/><line x1="24" y1="29" x2="15" y2="46" stroke="#60a5fa" stroke-width="1"/><line x1="24" y1="29" x2="24" y2="46" stroke="#60a5fa" stroke-width="1.1"/><line x1="24" y1="29" x2="33" y2="46" stroke="#60a5fa" stroke-width="1"/><line x1="24" y1="29" x2="41" y2="46" stroke="#60a5fa" stroke-width="1"/><circle cx="24" cy="24" r="21" fill="none" stroke="#60a5fa" stroke-width="1.5"/><line x1="3"  y1="29" x2="45" y2="29" stroke="#60a5fa" stroke-width="1.2"/><rect x="8"    y="18" width="4" height="10" rx="1"   fill="#60a5fa"/><rect x="15"   y="13" width="4" height="15" rx="1"   fill="#60a5fa"/><rect x="21.5" y="8"  width="5" height="20" rx="1.5" fill="#ffffff"/><rect x="29"   y="15" width="4" height="13" rx="1"   fill="#60a5fa"/><rect x="36"   y="20" width="4" height="8"  rx="1"   fill="#60a5fa"/>
                </svg>
                <h2 class="brand-title">Svƒõt v perspektivƒõ</h2>
                <p class="brand-subtitle">Data &nbsp;¬∑&nbsp; Kontext &nbsp;¬∑&nbsp; Souvislosti</p>
            </div>
        </div>
    </section>

    <script>
    /* ‚îÄ‚îÄ DEBUNKER ‚îÄ‚îÄ */
    var DB_SLIDES = [];
    var DB_DURATION = 10000;
    var dbCurrent = 0, dbPaused = false, dbStartTime = null, dbElapsed = 0, dbRafId = null;

    function dbRender(idx, animate) {
      var s = DB_SLIDES[idx];
      if (!s) return;
      var m = document.getElementById('mythCard');
      var d = document.getElementById('dataCard');
      var v = document.getElementById('vsCard');
      var c = document.getElementById('contextNote');
      var btn = document.getElementById('analysisBtn');
      if (!m || !d || !c || !btn || !v) return;
      
      if (animate) { 
          m.style.opacity='0'; d.style.opacity='0'; 
          c.style.opacity='0'; btn.style.opacity='0';
      }
      
      setTimeout(function() {
        m.classList.toggle('is-context', s.isMyth === false);
        document.getElementById('mythText').textContent = s.myth;
        document.getElementById('mythSource').textContent = s.mythSource;
        var n = document.getElementById('dataNumber');
        n.textContent = s.number;
        n.className = 'data-number' + (s.numberClass ? ' '+s.numberClass : '');
        document.getElementById('dataDesc').textContent = s.desc;
        document.getElementById('dataSource').textContent = s.source;
        c.textContent = s.context;
        
        if (s.link && s.link !== '#') {
            btn.style.visibility = 'visible';
            btn.style.pointerEvents = 'auto';
            btn.href = s.link;
            document.getElementById('btnTitle').textContent = s.btnTitle || 'ƒå√≠st anal√Ωzu';
        } else {
            btn.style.visibility = 'hidden';
            btn.style.pointerEvents = 'none';
        }
        
        document.querySelectorAll('.dot').forEach(function(dot, i) {
          dot.classList.toggle('active', i === idx);
        });
        
        if (animate || idx === 0) { 
            m.style.opacity='1'; d.style.opacity='1'; 
            c.style.opacity='1'; btn.style.opacity='1';
        }
      }, animate ? 350 : 0);
    }

    function dbInitDots() {
        var container = document.querySelector('.carousel-dots');
        if (!container) return;
        container.innerHTML = DB_SLIDES.map(function(_, i) {
            return '<button class="dot' + (i===0?' active':'') + '" onclick="goToSlide(' + i + ')"></button>';
        }).join('');
    }

    function dbUpdate() {
      if (dbPaused) return;
      var total = dbElapsed + (Date.now() - dbStartTime);
      var pct = Math.min((total / DB_DURATION) * 100, 100);
      var pf = document.getElementById('progressFill');
      if (pf) pf.style.width = pct + '%';
      if (total >= DB_DURATION) {
        dbCurrent = (dbCurrent + 1) % DB_SLIDES.length;
        dbRender(dbCurrent, true); dbReset();
      } else { dbRafId = requestAnimationFrame(dbUpdate); }
    }
    function dbReset() {
      cancelAnimationFrame(dbRafId);
      dbElapsed = 0; dbStartTime = Date.now();
      var pf = document.getElementById('progressFill');
      if (pf) pf.style.width = '0%';
      if (!dbPaused) {
          // Wait for transition to finish before starting progress
          setTimeout(function() {
              if (!dbPaused) dbRafId = requestAnimationFrame(dbUpdate);
          }, 400);
      }
    }
    function togglePause() {
      var btn = document.getElementById('pauseBtn');
      if (dbPaused) {
        dbPaused = false; dbStartTime = Date.now();
        btn.textContent = '‚è∏'; btn.classList.remove('paused'); btn.title = 'Pozastavit';
        dbRafId = requestAnimationFrame(dbUpdate);
      } else {
        dbPaused = true; dbElapsed += Date.now() - dbStartTime;
        cancelAnimationFrame(dbRafId);
        btn.textContent = '‚ñ∂'; btn.classList.add('paused'); btn.title = 'Spustit';
      }
    }
    function goToSlide(idx) { dbCurrent = idx; dbRender(dbCurrent, true); dbReset(); }
    function nextSlide() { goToSlide((dbCurrent + 1) % DB_SLIDES.length); }
    function prevSlide() { goToSlide((dbCurrent - 1 + DB_SLIDES.length) % DB_SLIDES.length); }

    /* ‚îÄ‚îÄ RENDER ‚îÄ‚îÄ */
    function statColor(s) {
      return s==='good'?'#059669':s==='bad'?'#dc2626':s==='warning'?'#d97706':'#0ea5e9';
    }
    
    function renderLatestArticles(articles, catData) {
      var list = document.getElementById('latestArticlesList');
      if (!list) return;
      if (!articles || articles.length === 0) {
        list.innerHTML = '<p class="topics-hint">Zat√≠m ≈æ√°dn√© ƒçl√°nky k zobrazen√≠.</p>';
        return;
      }

      var topicsMap = {};
      if (catData && catData.topics) {
        catData.topics.forEach(function(t) { topicsMap[t.slug] = t; });
      }

      list.innerHTML = articles.map(function(a) {
        var s0 = a.key_stats && a.key_stats[0];
        var color = statColor(s0 ? s0.color : 'neutral');
        var topicList = a.topics || [];
        var isMyth = topicList.indexOf('m√Ωty') !== -1;
        
        var icon = 'üìà';
        var statVal = '';
        var statLbl = '';
        
        if (isMyth) {
            if (a.slug === 'cr-a-eu-rozpocet' || (s0 && s0.color === 'bad')) {
                icon = '‚ùå'; statVal = 'NEPRAVDA'; color = '#dc2626';
            } else if (s0 && s0.color === 'warning') {
                icon = '‚ö†Ô∏è'; statVal = 'ZAV√ÅDƒöJ√çC√ç'; color = '#d97706';
            } else {
                icon = '‚úÖ'; statVal = 'PRAVDA'; color = '#059669';
            }
        } else {
            if (s0 && s0.color === 'good') icon = '‚úÖ';
            else if (s0 && s0.color === 'bad') icon = '<svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" style="margin-top:2px"><circle cx="12" cy="12" r="10"/><line x1="12" y1="8" x2="12" y2="12"/><line x1="12" y1="16" x2="12.01" y2="16"/></svg>';
            else if (s0 && s0.color === 'warning') icon = '‚ö†Ô∏è';
            else icon = 'üìà';
            
            statVal = s0 ? s0.value : '';
            statLbl = (s0 && s0.label) ? s0.label : '';
        }
        
        var primaryTopicSlug = topicList[0] || 'ƒçesko';
        var primaryColor = (topicsMap[primaryTopicSlug] || {color: '#0ea5e9'}).color;

        var tags = topicList.slice(0,3).map(function(tSlug) {
          var tInfo = topicsMap[tSlug] || { label: tSlug, color: '#64748b' };
          const TAG_LABELS = {
            'm√Ωty': 'M√Ωty vs fakta',
            'ekonomika': 'Ekonomika',
            'zdrav√≠': 'Zdrav√≠',
            'inovace': 'Inovace',
            'energie': 'Energie',
            'bezpeƒçnost': 'Bezpeƒçnost',
            'demokracie': 'Demokracie',
            'v√Ωzvy': 'V√Ωzvy',
            'ƒçesko': 'ƒåesko',
            'svƒõt': 'Svƒõt',
          };
          var label = (TAG_LABELS[tSlug] || tSlug.toUpperCase());
          return '<span class="article-tag" style="background:'+tInfo.color+'">'+label+'</span>';
        }).join(' ');

        var displayTitle = a.title_short || a.title || 'Bez n√°zvu';

        return '<a href="clanek.html?slug='+a.slug+'" class="article-card" style="border-left-color:'+primaryColor+'" data-topic="'+topicList.join(' ')+'">'
          +'<div class="article-card-header">'
          +'<div class="article-meta">'+tags+'<span class="article-date">'+(a.dateStr || '')+'</span></div>'
          +'<h3 class="article-title">'+displayTitle+'</h3>'
          +'<p class="article-excerpt">'+(a.perex||'')+'</p>'
          +'</div>'
          +'<div class="article-stats">'
          +'<div class="article-stat" style="color:'+color+'">'
          +'<span style="font-size:1.1rem; line-height:1; flex-shrink:0">'+icon+'</span>'
          +'<span class="article-stat-text">'+statVal+' <span class="article-stat-label">'+statLbl+'</span></span>'
          +'</div>'
          +'<span class="article-read-more" style="color:#0ea5e9; font-weight:700; font-size:0.8rem; margin-left:0.5rem">ƒå√≠st v√≠ce ‚Üí</span>'
          +'</div></a>';
      }).join('');
    }
    function renderTopics(topics, articles) {
      var grid = document.getElementById('topicGrid');
      if (!grid) return;
      if (!topics || topics.length === 0) {
        grid.innerHTML = '<p class="topics-hint">T√©mata se nepoda≈ôilo naƒç√≠st.</p>';
        return;
      }
      grid.innerHTML = topics.map(function(t) {
        var count = (articles || []).filter(function(a){ return (a.topics||[]).indexOf(t.slug)!==-1; }).length;
        var cls = t.geo ? 'topic-card featured topic-geo' : 'topic-card';
        return '<a href="archiv.html?topic='+encodeURIComponent(t.slug)+'" class="'+cls
          +'" style="--category-color:'+t.color+'" data-topic="'+t.slug+'">'
          +'<span class="category-icon"><svg viewBox="0 0 24 24">'+(t.icon||'')+'</svg></span>'
          +'<h3 class="category-name">'+t.label+'</h3>'
          +'<span class="topic-badge">'+count+'</span>'
          +'</a>';
      }).join('');
    }

    /* ‚îÄ‚îÄ INIT: p≈ô√≠m√Ω IIFE ‚îÄ‚îÄ */
    (function init() {
      var fetchJson = function(path, fallback) {
        return fetch(path)
          .then(function(r) { return r.ok ? r.json() : fallback; })
          .catch(function(err) { 
            console.warn('SVP varov√°n√≠: Selhalo naƒçten√≠ ' + path, err); 
            return fallback; 
          });
      };

      Promise.all([
        fetchJson('data/debunker.json', []),
        fetchJson('data/manifest.json', []),
        fetchJson('data/categories.json', { topics: [] })
      ]).then(function(data) {
        var debData = data[0];
        var slugs   = data[1];
        var catData = data[2];

        /* Debunker */
        if (debData && debData.length > 0) {
            DB_SLIDES = debData;
            dbInitDots();
            dbRender(0, false);
            dbStartTime = Date.now();
            dbRafId = requestAnimationFrame(dbUpdate);
        }

        /* ƒål√°nky */
        if (!slugs || slugs.length === 0) {
            console.warn('SVP: ≈Ω√°dn√© ƒçl√°nky k naƒçten√≠ v manifestu.');
            renderTopics(catData.topics || [], []);
            return;
        }

        return Promise.all(slugs.map(function(slug) {
          return fetch('articles/' + slug + '.json')
            .then(function(r) { return r.ok ? r.json() : null; })
            .catch(function() { return null; });
        })).then(function(results) {
          var articles = (results || [])
            .filter(Boolean)
            .filter(function(a) { return a.status === 'published'; })
            .sort(function(a, b) { 
                return (b.date || '').localeCompare(a.date || ''); 
            });
          
          renderLatestArticles(articles.slice(0, 6), catData);
          renderTopics(catData.topics || [], articles);
        });

      }).catch(function(err) {
        console.error('SVP kritick√° chyba:', err);
      });
    })();
    </script>

    <footer></footer>
    <script src="perspektiva-data.js"></script>
    <script src="perspektiva-stats.js"></script>
    <script src="components.js"></script>
</body>
</html>
